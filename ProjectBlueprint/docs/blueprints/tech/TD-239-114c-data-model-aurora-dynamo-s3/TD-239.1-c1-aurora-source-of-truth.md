---
id: TD-239.1
title: "**C.1 Aurora (source of truth)**"
source_doc: "TechDevBlueprint.docx"
source_path: "docs\blueprints\tech\TD-239-114c-data-model-aurora-dynamo-s3\TD-239.1-c1-aurora-source-of-truth.md"
parent_id: TD-239
anchor: "TD-239.1"
checksum: "sha256:342d9eb4cbfa45177d36c21c093adf54c56260c4828b96920de05aa7ced01143"
last_modified: "2025-11-06T20:40:46Z"
doc_kind: "TD"
h_level: 3
---
<a id="TD-239.1"></a>
### **C.1 Aurora (source of truth)**

*-- Creator Fan-Sub profile*  
*create table fansub_creator (*  
*creator_id text primary key, -- fsc\_...*  
*user_id text not null unique, -- usr\_...*  
*handle text not null unique, -- vanity*  
*display_name text not null,*  
*city_gate text\[\], -- allowed cities (null = global)*  
*bio text,*  
*price_month_cents int not null, -- subscription price*  
*currency text not null default 'USD',*  
*is_published boolean not null default false,*  
*idv_required_ok boolean not null default false, -- from ยง1.6*  
*nsfw_ok boolean not null default true, -- creator allows NSFW (still SFW preview rules)*  
*created_at timestamptz not null default now(),*  
*updated_at timestamptz not null default now()*  
*);*  
  
*-- Subscription & entitlement*  
*create table fansub_subscription (*  
*sub_id text primary key, -- fss\_...*  
*creator_id text not null references fansub_creator(creator_id),*  
*fan_user_id text not null, -- usr\_...*  
*provider text not null, -- 'stripe'*  
*provider_ref text not null, -- subscription id*  
*status text not null check (status in ('active','past_due','paused','canceled','trialing')),*  
*current_period_end timestamptz not null,*  
*renews boolean not null default true,*  
*created_at timestamptz not null default now(),*  
*updated_at timestamptz not null default now(),*  
*unique (creator_id, fan_user_id)*  
*);*  
  
*-- Tips & PPV & Requests share a common "order" header*  
*create table fansub_order (*  
*order_id text primary key, -- fso\_...*  
*kind text not null check (kind in ('tip','ppv','request')),*  
*creator_id text not null,*  
*buyer_user_id text not null,*  
*amount_cents int not null,*  
*fee_cents int not null default 0, -- platform fee (see ยง1.9)*  
*fee_tax_cents int not null default 0,*  
*currency text not null default 'USD',*  
*status text not null check (status in ('pending','succeeded','refunded','failed','disputed')),*  
*provider text not null, -- 'stripe'*  
*provider_charge text, -- charge/payment intent id*  
*created_at timestamptz not null default now(),*  
*updated_at timestamptz not null default now()*  
*);*  
  
*-- PPV posts (locked content)*  
*create table fansub_ppv_post (*  
*ppv_id text primary key, -- fpp\_...*  
*creator_id text not null references fansub_creator(creator_id),*  
*title text not null,*  
*caption text,*  
*price_cents int not null,*  
*preview_media jsonb not null default '\[\]'::jsonb, -- S3 previews (scanned)*  
*final_manifest_id text, -- external manifest id (immutable)*  
*nsfw_band int not null default 0,*  
*is_published boolean not null default false,*  
*created_at timestamptz not null default now(),*  
*updated_at timestamptz not null default now()*  
*);*  
  
*-- Entitlement when PPV is purchased*  
*create table fansub_ppv_access (*  
*access_id text primary key, -- fpa\_...*  
*ppv_id text not null references fansub_ppv_post(ppv_id),*  
*buyer_user_id text not null,*  
*order_id text not null references fansub_order(order_id),*  
*created_at timestamptz not null default now(),*  
*unique (ppv_id, buyer_user_id)*  
*);*  
  
*-- Custom request lifecycle (threads carry action cards; this table is the money/evidence)*  
*create table fansub_request (*  
*request_id text primary key, -- fsr\_...*  
*thread_id text not null, -- link to ยง1.4 thread*  
*creator_id text not null,*  
*buyer_user_id text not null,*  
*title text not null,*  
*brief text not null,*  
*quoted_cents int not null,*  
*status text not null check (status in ('quoted','accepted','paid','delivered','approved','revision_requested','refunded','disputed','closed')),*  
*order_id text, -- fansub_order once paid*  
*proof_manifest_id text, -- proofs (external)*  
*final_manifest_id text, -- finals (external)*  
*created_at timestamptz not null default now(),*  
*updated_at timestamptz not null default now()*  
*);*
