{
  "repo_root": "C:\\RastUp\\RastUp",
  "nt_doc": "C:\\RastUp\\RastUp\\ProjectBlueprint\\Combined_Master_PLAIN_Non_Tech_001.docx",
  "td_doc": "C:\\RastUp\\RastUp\\ProjectBlueprint\\TechnicalDevelopmentPlan.odt",
  "total_items": 27,
  "roots": [
    "WBS-1"
  ],
  "items": [
    {
      "id": "WBS-1.14.2.2",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 1680,
      "line": "1.14.2.2 DynamoDB (hot\u2011path caches)fansub_entitlement_cache item shape:{",
      "title": "DynamoDB (hot\u2011path caches)fansub_entitlement_cache item shape:{",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.17.3",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 2751,
      "line": "1.17.3 Faceted Navigation, Pagination & FiltersObjective: Let users filter richly without creating an indexation explosion.ApproachIndexable landing per role/city without filters (e.g., /models?city=houston).Non\u2011indexable filter combinations (e.g., price/amenities) \u2192 keep crawlable links but serve noindex, follow and self\u2011canonical to the landing variant.Pagination: ?page=2 allowed but noindex; canonical to page 1 landing. Avoid rel=prev/next (deprecated); use strong internal links instead.Artifact \u2014 filter allowlist",
      "title": "Faceted Navigation, Pagination & FiltersObjective: Let users filter richly without creating an indexation explosion.ApproachIndexable landing per role/city without filters (e.g., /models?city=houston).Non\u2011indexable filter combinations (e.g., price/amenities) \u2192 keep crawlable links but serve noindex, follow and self\u2011canonical to the landing variant.Pagination: ?page=2 allowed but noindex; canonical to page 1 landing. Avoid rel=prev/next (deprecated); use strong internal links instead.Artifact \u2014 filter allowlist",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.17.4",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 2755,
      "line": "1.17.4 Structured Data (JSON\u2011LD) \u2014 Full CoverageEntity \u2192 schema.org type mapPeople (Service Profiles): Person + Offer(s) for packages; optional AggregateRating when policy allows.Studios: LocalBusiness with amenityFeature; optional AggregateRating.Case Studies/Guides: Article/CreativeWork.Breadcrumbs: BreadcrumbList on all public pages.Search results (optional enhancement): ItemList on landing pages.ArtifactsA) BreadcrumbList",
      "title": "Structured Data (JSON\u2011LD) \u2014 Full CoverageEntity \u2192 schema.org type mapPeople (Service Profiles): Person + Offer(s) for packages; optional AggregateRating when policy allows.Studios: LocalBusiness with amenityFeature; optional AggregateRating.Case Studies/Guides: Article/CreativeWork.Breadcrumbs: BreadcrumbList on all public pages.Search results (optional enhancement): ItemList on landing pages.ArtifactsA) BreadcrumbList",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.17.7",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 2828,
      "line": "1.17.7 Performance for SEO (CWV\u2011first Build)Budgets (mobile P75): LCP \u2264 2.5s, CLS \u2264 0.10, INP \u2264 200ms, TTFB \u2264 800ms.TacticsPick an LCP element (hero image) per template; preload it with as=image and fetchpriority=\"high\".Inline critical CSS; defer the rest; no blocking fonts (local WOFF2 + font-display: swap).Code\u2011split heavy widgets; ship minimal JS on public pages.Preconnect only to our CDN and Stripe (checkout only).Serve stale\u2011while\u2011revalidate via ISR + CloudFront.Use first\u2011party analytics via sendBeacon (no third\u2011party bloat).Artifact \u2014 Lighthouse CI budget",
      "title": "Performance for SEO (CWV\u2011first Build)Budgets (mobile P75): LCP \u2264 2.5s, CLS \u2264 0.10, INP \u2264 200ms, TTFB \u2264 800ms.TacticsPick an LCP element (hero image) per template; preload it with as=image and fetchpriority=\"high\".Inline critical CSS; defer the rest; no blocking fonts (local WOFF2 + font-display: swap).Code\u2011split heavy widgets; ship minimal JS on public pages.Preconnect only to our CDN and Stripe (checkout only).Serve stale\u2011while\u2011revalidate via ISR + CloudFront.Use first\u2011party analytics via sendBeacon (no third\u2011party bloat).Artifact \u2014 Lighthouse CI budget",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.17.8",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 2839,
      "line": "1.17.8 Internationalization (hreflang) & LocalizationLaunch locale: en\u2011US; all public pages must set <html lang=\"en\">.Hreflang scaffolding in head for future locales; keep canonical without locale in path; add <link rel=\"alternate\" hreflang=\"\u2026\"> once translations ship.Localize currency/date/number rendering server\u2011side for public pages; keep URLs stable.Artifact \u2014 hreflang helper",
      "title": "Internationalization (hreflang) & LocalizationLaunch locale: en\u2011US; all public pages must set <html lang=\"en\">.Hreflang scaffolding in head for future locales; keep canonical without locale in path; add <link rel=\"alternate\" hreflang=\"\u2026\"> once translations ship.Localize currency/date/number rendering server\u2011side for public pages; keep URLs stable.Artifact \u2014 hreflang helper",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.17.9",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 2843,
      "line": "1.17.9 Accessibility (A11y) Synergy for SEOSemantic structure (landmarks, headings) and visible focus.Keyboard\u2011reachable filters/maps; ARIA for tabs/carousels.Image alt as above; captions/transcripts on videos.Error pages with clear next actions; readable contrast (\u22654.5:1 body text).1.17.10 Sitemaps (Web, Image, Video)StrategyIndex file /sitemap.xml linking to segmented sitemaps (People A\u2011Z, Studios by city, Case Studies, Cities).Image sitemaps for people/studios (SFW thumbnails only).Video sitemap for case studies with videos.Artifact \u2014 Image sitemap entry (template)",
      "title": "Accessibility (A11y) Synergy for SEOSemantic structure (landmarks, headings) and visible focus.Keyboard\u2011reachable filters/maps; ARIA for tabs/carousels.Image alt as above; captions/transcripts on videos.Error pages with clear next actions; readable contrast (\u22654.5:1 body text).1.17.10 Sitemaps (Web, Image, Video)StrategyIndex file /sitemap.xml linking to segmented sitemaps (People A\u2011Z, Studios by city, Case Studies, Cities).Image sitemaps for people/studios (SFW thumbnails only).Video sitemap for case studies with videos.Artifact \u2014 Image sitemap entry (template)",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.17.11",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 2852,
      "line": "1.17.11 Internal Linking & BreadcrumbsBreadcrumbs everywhere (Home \u2192 City \u2192 Role \u2192 Entity).In\u2011content cross\u2011links:On profiles: \u201cSimilar in {City}\u201d, \u201cStudios with {Amenity}\u201dOn studios: \u201cPeople recently booked here\u201dAvoid link farms; keep blocks 3\u20138 items; deterministic selection.1.17.12 Log\u2011File Analysis & Search Console IngestionExport edge logs (CloudFront) + app access logs to S3; model into Athena (\u00a71.13).Build crawl dashboard: hits by bot UA, 200/3xx/4xx, coverage of sitemaps, crawl waste on non\u2011indexable pages.Ingest GSC performance/coverage via API to the lake; build SEO funnel (impressions\u2192clicks\u2192profile views\u2192checkout).Artifact \u2014 Athena table (simplified)",
      "title": "Internal Linking & BreadcrumbsBreadcrumbs everywhere (Home \u2192 City \u2192 Role \u2192 Entity).In\u2011content cross\u2011links:On profiles: \u201cSimilar in {City}\u201d, \u201cStudios with {Amenity}\u201dOn studios: \u201cPeople recently booked here\u201dAvoid link farms; keep blocks 3\u20138 items; deterministic selection.1.17.12 Log\u2011File Analysis & Search Console IngestionExport edge logs (CloudFront) + app access logs to S3; model into Athena (\u00a71.13).Build crawl dashboard: hits by bot UA, 200/3xx/4xx, coverage of sitemaps, crawl waste on non\u2011indexable pages.Ingest GSC performance/coverage via API to the lake; build SEO funnel (impressions\u2192clicks\u2192profile views\u2192checkout).Artifact \u2014 Athena table (simplified)",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.17.13",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 2860,
      "line": "1.17.13 SEO\u2011Safe ExperimentationNo client\u2011side cloaking: bots must see a stable, indexable version (avoid A/B that changes indexable content for bots only).Keep experiments server\u2011side (SSR/ISR) or non\u2011indexable UI variations.For content experiments (titles, descriptions), roll out by entity cohorts; revalidate ISR pages on change.1.17.14 Risk Register & MitigationsDuplicate content via tracking params \u2192 mitigated by canonical middleware + 301.Faceted crawl bloat \u2192 noindex, follow + allowlist + self\u2011canonical.Accidental 18+ leakage \u2192 centralized SFW image service for OG/JSON\u2011LD; tests in CI.Thin pages (empty profiles) \u2192 hold noindex until profile meets completeness threshold.CLS regressions \u2192 enforce width/height on images; block unstyled font flashes.1.17.15 QA Checklists (Pre\u2011launch & Ongoing)Pre\u2011launchCanonical/robots tags verified on top templates.Sitemaps (web/image/video) present and validate; robots.txt references index.JSON\u2011LD validates on 25 sample pages across types.Lighthouse p75 budgets met on emulated mobile.All OG images SFW; email templates tested for SFW previews.OngoingWeekly crawl dashboard reviewed; non\u2011indexable hit rate trending down.GSC: errors addressed; CTR and position monitored for top city/role pages.Uptime for ISR revalidation hooks; cache hit ratio \u226595% for public pages.1.17.16 Work Packages (Cursor 4\u2011agent lanes)Agent A \u2014 Web: canonical middleware, meta/LD\u2011JSON injectors, templates (title/desc/headers), image/video sitemaps, breadcrumb component.Agent B \u2014 API: SEO resolvers, slug service, ISR revalidation hooks, Search Console export cron.Agent C \u2014 Ops: CloudFront behaviors, logs\u2192S3\u2192Athena pipeline, robots/noindex header policy, cache keys.Agent D \u2014 QA/Perf: Lighthouse CI, JSON\u2011LD tests, SFW OG guard, crawl dashboards, a11y audits.1.17.17 Acceptance Criteria (mark \u00a71.17 FINAL only when ALL true)Canonical URLs, robots headers + meta, and parameter stripping are live; filter/pagination pages are noindex and self\u2011canonical.City/role landings exist and are indexable; hubs and detail pages have SFW OG images; age\u2011gated items are noindex.JSON\u2011LD present and valid for Person(+Offers), LocalBusiness, Article, BreadcrumbList, and (where applicable) VideoObject.Segmented web + image + video sitemaps generate correctly and reference only indexable content; robots.txt points to the index.CWV budgets met (p75 mobile) on Home, City/Role landing, Service Profile, Studio Detail, and a Case Study page.A11y checks pass (axe/Pa11y) on public pages; images have alt; keyboard navigation functional.CloudFront logs + GSC are ingested; crawl waste <10% of bot hits after 30 days; cache hit ratio \u226595%.SEO\u2011safe experimentation policy enforced; no client\u2011side cloaking or bot\u2011variant divergence.\u00a71.18 \u2014 Security, Compliance & DevSecOps(zero\u2011trust architecture \u00b7 IAM boundaries \u00b7 authN/authZ for AppSync \u00b7 secrets & key mgmt \u00b7 encryption in transit/at rest \u00b7 data classification & PII minimization \u00b7 logging/audit & tamper\u2011evidence \u00b7 WAF/bot/DDOS protections \u00b7 vulnerability mgmt & CI/CD hardening \u00b7 incident response & DR \u00b7 compliance scaffolding \u00b7 telemetry, SLOs, tests, costs)Purpose. Define the end\u2011to\u2011end security & compliance posture for the marketplace (web/app, Amplify/AppSync/Lambda/Aurora/DynamoDB/S3/CF, Stripe/IDV/esign providers), with implementation\u2011grade controls and inline artifacts you can paste into the plan. This section will not advance until it satisfies the \u226599.9% bar.1.18.A Security canon & threat modelLeast privilege & zero trust. Every call is authenticated and authorized; no \u201ctrusted subnet.\u201dDefault\u2011deny at edges. WAF blocks obvious bad traffic; API throttles by identity.PII minimization. Only store what we must; tokenize or hash where possible; keep PII out of logs.Compartmentalization. Separate AWS accounts per env (dev/stage/prod) and per blast radius (prod\u2011data, prod\u2011ops).Tamper\u2011evident audit. Immutable trails for money/IDV/policy actions.Idempotence everywhere. All webhooks & money operations idempotent (no double charges).Cost aware. Prefer managed services (Amplify, Cognito, AppSync, WAF, Security Hub) over self\u2011hosted appliances.1.18.B Identity & access management (IAM) boundariesRecommended path: security/policies/iam-boundaries.mdAccounts & orgAWS Organizations with SCPs: deny *:* at root, deny public S3 unless explicitly allowed, deny KMS key deletion.Separate accounts: rastup-dev, rastup-stage, rastup-prod, plus rastup-shared (log archive) and rastup-security.RolesWorkload roles: per Lambda/service with minimal permissions (AppSync resolver roles; S3 prefixes; DynamoDB tables).Human roles: AdminLimited (break\u2011glass), OpsReadOnly, Analyst, SecurityEngineer. MFA enforced; session limits (1\u20134h).JIT elevation via IAM Identity Center (formerly SSO) with approval; all admin actions audited.Inline artifact \u2014 example least\u2011priv Dynamo policy",
      "title": "SEO\u2011Safe ExperimentationNo client\u2011side cloaking: bots must see a stable, indexable version (avoid A/B that changes indexable content for bots only).Keep experiments server\u2011side (SSR/ISR) or non\u2011indexable UI variations.For content experiments (titles, descriptions), roll out by entity cohorts; revalidate ISR pages on change.1.17.14 Risk Register & MitigationsDuplicate content via tracking params \u2192 mitigated by canonical middleware + 301.Faceted crawl bloat \u2192 noindex, follow + allowlist + self\u2011canonical.Accidental 18+ leakage \u2192 centralized SFW image service for OG/JSON\u2011LD; tests in CI.Thin pages (empty profiles) \u2192 hold noindex until profile meets completeness threshold.CLS regressions \u2192 enforce width/height on images; block unstyled font flashes.1.17.15 QA Checklists (Pre\u2011launch & Ongoing)Pre\u2011launchCanonical/robots tags verified on top templates.Sitemaps (web/image/video) present and validate; robots.txt references index.JSON\u2011LD validates on 25 sample pages across types.Lighthouse p75 budgets met on emulated mobile.All OG images SFW; email templates tested for SFW previews.OngoingWeekly crawl dashboard reviewed; non\u2011indexable hit rate trending down.GSC: errors addressed; CTR and position monitored for top city/role pages.Uptime for ISR revalidation hooks; cache hit ratio \u226595% for public pages.1.17.16 Work Packages (Cursor 4\u2011agent lanes)Agent A \u2014 Web: canonical middleware, meta/LD\u2011JSON injectors, templates (title/desc/headers), image/video sitemaps, breadcrumb component.Agent B \u2014 API: SEO resolvers, slug service, ISR revalidation hooks, Search Console export cron.Agent C \u2014 Ops: CloudFront behaviors, logs\u2192S3\u2192Athena pipeline, robots/noindex header policy, cache keys.Agent D \u2014 QA/Perf: Lighthouse CI, JSON\u2011LD tests, SFW OG guard, crawl dashboards, a11y audits.1.17.17 Acceptance Criteria (mark \u00a71.17 FINAL only when ALL true)Canonical URLs, robots headers + meta, and parameter stripping are live; filter/pagination pages are noindex and self\u2011canonical.City/role landings exist and are indexable; hubs and detail pages have SFW OG images; age\u2011gated items are noindex.JSON\u2011LD present and valid for Person(+Offers), LocalBusiness, Article, BreadcrumbList, and (where applicable) VideoObject.Segmented web + image + video sitemaps generate correctly and reference only indexable content; robots.txt points to the index.CWV budgets met (p75 mobile) on Home, City/Role landing, Service Profile, Studio Detail, and a Case Study page.A11y checks pass (axe/Pa11y) on public pages; images have alt; keyboard navigation functional.CloudFront logs + GSC are ingested; crawl waste <10% of bot hits after 30 days; cache hit ratio \u226595%.SEO\u2011safe experimentation policy enforced; no client\u2011side cloaking or bot\u2011variant divergence.\u00a71.18 \u2014 Security, Compliance & DevSecOps(zero\u2011trust architecture \u00b7 IAM boundaries \u00b7 authN/authZ for AppSync \u00b7 secrets & key mgmt \u00b7 encryption in transit/at rest \u00b7 data classification & PII minimization \u00b7 logging/audit & tamper\u2011evidence \u00b7 WAF/bot/DDOS protections \u00b7 vulnerability mgmt & CI/CD hardening \u00b7 incident response & DR \u00b7 compliance scaffolding \u00b7 telemetry, SLOs, tests, costs)Purpose. Define the end\u2011to\u2011end security & compliance posture for the marketplace (web/app, Amplify/AppSync/Lambda/Aurora/DynamoDB/S3/CF, Stripe/IDV/esign providers), with implementation\u2011grade controls and inline artifacts you can paste into the plan. This section will not advance until it satisfies the \u226599.9% bar.1.18.A Security canon & threat modelLeast privilege & zero trust. Every call is authenticated and authorized; no \u201ctrusted subnet.\u201dDefault\u2011deny at edges. WAF blocks obvious bad traffic; API throttles by identity.PII minimization. Only store what we must; tokenize or hash where possible; keep PII out of logs.Compartmentalization. Separate AWS accounts per env (dev/stage/prod) and per blast radius (prod\u2011data, prod\u2011ops).Tamper\u2011evident audit. Immutable trails for money/IDV/policy actions.Idempotence everywhere. All webhooks & money operations idempotent (no double charges).Cost aware. Prefer managed services (Amplify, Cognito, AppSync, WAF, Security Hub) over self\u2011hosted appliances.1.18.B Identity & access management (IAM) boundariesRecommended path: security/policies/iam-boundaries.mdAccounts & orgAWS Organizations with SCPs: deny *:* at root, deny public S3 unless explicitly allowed, deny KMS key deletion.Separate accounts: rastup-dev, rastup-stage, rastup-prod, plus rastup-shared (log archive) and rastup-security.RolesWorkload roles: per Lambda/service with minimal permissions (AppSync resolver roles; S3 prefixes; DynamoDB tables).Human roles: AdminLimited (break\u2011glass), OpsReadOnly, Analyst, SecurityEngineer. MFA enforced; session limits (1\u20134h).JIT elevation via IAM Identity Center (formerly SSO) with approval; all admin actions audited.Inline artifact \u2014 example least\u2011priv Dynamo policy",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.19.4",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3125,
      "line": "1.19.4 Locale detection & routing (no auto\u2011redirect loop)Middleware (concept)",
      "title": "Locale detection & routing (no auto\u2011redirect loop)Middleware (concept)",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.19.9",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3171,
      "line": "1.19.9 Public SEO pages: localized metadata & JSON\u2011LDHead helper",
      "title": "Public SEO pages: localized metadata & JSON\u2011LDHead helper",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.19.12",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3190,
      "line": "1.19.12 A11y testing (automated + manual)Automated (CI): axe + pa11y on /, /city/{city}, /p/{handle}, /s/{slug}, /checkout.",
      "title": "A11y testing (automated + manual)Automated (CI): axe + pa11y on /, /city/{city}, /p/{handle}, /s/{slug}, /checkout.",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.19.14",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3194,
      "line": "1.19.14 Governance: language coverage & content policyLaunch locales: en-US; \u201cPhase 2\u201d: es-ES; \u201cPhase 3\u201d: fr-FR, de-DE, ar.Gate publishing of a locale until: 100% key coverage, pseudolocalization pass, a11y pass, SEO checks (hreflang).Maintain a glossary per role/feature to keep translations consistent.1.19.15 Work packages (Cursor 4\u2011agent lanes)Agent A \u2014 Web/App: i18n provider, locale switcher, RTL styles, A11y components (Modal, Combobox, SkipLink), head meta helper.Agent B \u2014 API/SSR: user prefs fields/resolvers, server formatting helpers, Node full\u2011icu build, JSON\u2011LD localization.Agent C \u2014 Comms/SEO: localized MJML templates, subject/From localization, hreflang tags, sitemap alternates.Agent D \u2014 QA/Tooling: extractor/pseudolocalizer, axe/pa11y CI, screenshot diff, catalogs versioning/CDN invalidation.1.19.16 Acceptance criteria \u2014 mark \u00a71.19 FINAL only when ALL trueLocale selection persists; server adds lang & dir correctly; no auto\u2011redirect loops; hreflang alternates present on SEO pages.ICU MessageFormat is used across web/app/emails; prices/dates/numbers localized; dual\u2011timezone display where relevant.RTL renders correctly: layout mirrored, icons swapped, reading order valid; no clipped/truncated text.A11y: WCAG 2.2 AA checks pass (axe/pa11y + manual SR runs); keyboard navigation works across all interactive components.Public pages (SEO) pre\u2011render localized titles/descriptions/JSON\u2011LD with SFW images only; Safe\u2011Mode rules respected.Catalogs load per\u2011locale (no shipping all); bundle budgets met; Node SSR has full\u2011icu.Translation workflow operational: extraction \u2192 PR review \u2192 pseudolocalized QA \u2192 deploy; glossary maintained.Emails localized, with quiet hours by timezone; no 18+ previews in emails.Costs controlled: catalogs on S3/CDN; no paid localization SaaS at launch.\u00a71.20 \u2014 Mobile (PWA + Optional Native Shells), Push, and Device Capabilities(app architecture \u00b7 PWA config & offline \u00b7 optional RN/Expo shells \u00b7 deep links & routing \u00b7 auth/session on device \u00b7 push notifications (APNs/FCM/Pinpoint) \u00b7 file uploads from camera \u00b7 Safe\u2011Mode & age\u2011gated UX \u00b7 performance budgets \u00b7 a11y on mobile \u00b7 CI/CD & releases \u00b7 telemetry \u00b7 tests \u00b7 cost posture)Purpose. Specify the complete mobile experience: a first\u2011class Progressive Web App (PWA) that covers the entire user journey (discovery \u2192 messages \u2192 booking \u2192 delivery), with an optional React Native (Expo) shell for app store presence when/if desired. This section defines how we implement offline, push, deep\u2011links, device uploads, Safe\u2011Mode gating, performance, a11y, telemetry, CI/CD, and costs. All artifacts are inline text for your Word doc with \u201cRecommended filename/path\u201d tags so your builders can later lift them into the repo.1.20.A Canon & invariantsPWA\u2011first: one codebase (Next.js) with service worker, install prompt, offline for core routes, and background sync for drafts/uploads.Optional native shells (React Native + Expo) wrap the web for store distribution and system\u2011level push; both shells and PWA use the same AppSync APIs.Safe\u2011Mode on mobile: defaults ON for guests/new installs; SFW previews only; 18+ features gated behind age verification and explicit user choice, never emailed or pushed with previews.Cost\u2011conscious: APNs/FCM via Amazon Pinpoint/SNS, no extra third\u2011party SDK bloat; media uploads are direct\u2011to\u2011S3 presigned, resized on device.Accessibility: WCAG mobile patterns, large tap targets, VoiceOver/TalkBack tested, motion\u2011safe animations.Privacy: no background location; images EXIF stripped on upload (unless user opts in for studio proofs).1.20.B Client architecturePWA shell (Next.js): app\u2011router, service worker, manifest, edge caching; GraphQL via AppSync (JWT auth).Native shells (optional):React Native + Expo (managed workflow) for iOS/Android.Uses a small native bridge for push tokens, file pickers, camera, and device storage; renders either RN screens or a WebView wrapper for certain flows if we choose a hybrid approach.Shared modules: auth/session, GraphQL client, feature flags, Safe\u2011Mode, formatting (ICU), and analytics events shared across PWA and RN.1.20.C PWA configuration (manifest, SW, caching, offline)Recommended path: web/public/manifest.webmanifest{",
      "title": "Governance: language coverage & content policyLaunch locales: en-US; \u201cPhase 2\u201d: es-ES; \u201cPhase 3\u201d: fr-FR, de-DE, ar.Gate publishing of a locale until: 100% key coverage, pseudolocalization pass, a11y pass, SEO checks (hreflang).Maintain a glossary per role/feature to keep translations consistent.1.19.15 Work packages (Cursor 4\u2011agent lanes)Agent A \u2014 Web/App: i18n provider, locale switcher, RTL styles, A11y components (Modal, Combobox, SkipLink), head meta helper.Agent B \u2014 API/SSR: user prefs fields/resolvers, server formatting helpers, Node full\u2011icu build, JSON\u2011LD localization.Agent C \u2014 Comms/SEO: localized MJML templates, subject/From localization, hreflang tags, sitemap alternates.Agent D \u2014 QA/Tooling: extractor/pseudolocalizer, axe/pa11y CI, screenshot diff, catalogs versioning/CDN invalidation.1.19.16 Acceptance criteria \u2014 mark \u00a71.19 FINAL only when ALL trueLocale selection persists; server adds lang & dir correctly; no auto\u2011redirect loops; hreflang alternates present on SEO pages.ICU MessageFormat is used across web/app/emails; prices/dates/numbers localized; dual\u2011timezone display where relevant.RTL renders correctly: layout mirrored, icons swapped, reading order valid; no clipped/truncated text.A11y: WCAG 2.2 AA checks pass (axe/pa11y + manual SR runs); keyboard navigation works across all interactive components.Public pages (SEO) pre\u2011render localized titles/descriptions/JSON\u2011LD with SFW images only; Safe\u2011Mode rules respected.Catalogs load per\u2011locale (no shipping all); bundle budgets met; Node SSR has full\u2011icu.Translation workflow operational: extraction \u2192 PR review \u2192 pseudolocalized QA \u2192 deploy; glossary maintained.Emails localized, with quiet hours by timezone; no 18+ previews in emails.Costs controlled: catalogs on S3/CDN; no paid localization SaaS at launch.\u00a71.20 \u2014 Mobile (PWA + Optional Native Shells), Push, and Device Capabilities(app architecture \u00b7 PWA config & offline \u00b7 optional RN/Expo shells \u00b7 deep links & routing \u00b7 auth/session on device \u00b7 push notifications (APNs/FCM/Pinpoint) \u00b7 file uploads from camera \u00b7 Safe\u2011Mode & age\u2011gated UX \u00b7 performance budgets \u00b7 a11y on mobile \u00b7 CI/CD & releases \u00b7 telemetry \u00b7 tests \u00b7 cost posture)Purpose. Specify the complete mobile experience: a first\u2011class Progressive Web App (PWA) that covers the entire user journey (discovery \u2192 messages \u2192 booking \u2192 delivery), with an optional React Native (Expo) shell for app store presence when/if desired. This section defines how we implement offline, push, deep\u2011links, device uploads, Safe\u2011Mode gating, performance, a11y, telemetry, CI/CD, and costs. All artifacts are inline text for your Word doc with \u201cRecommended filename/path\u201d tags so your builders can later lift them into the repo.1.20.A Canon & invariantsPWA\u2011first: one codebase (Next.js) with service worker, install prompt, offline for core routes, and background sync for drafts/uploads.Optional native shells (React Native + Expo) wrap the web for store distribution and system\u2011level push; both shells and PWA use the same AppSync APIs.Safe\u2011Mode on mobile: defaults ON for guests/new installs; SFW previews only; 18+ features gated behind age verification and explicit user choice, never emailed or pushed with previews.Cost\u2011conscious: APNs/FCM via Amazon Pinpoint/SNS, no extra third\u2011party SDK bloat; media uploads are direct\u2011to\u2011S3 presigned, resized on device.Accessibility: WCAG mobile patterns, large tap targets, VoiceOver/TalkBack tested, motion\u2011safe animations.Privacy: no background location; images EXIF stripped on upload (unless user opts in for studio proofs).1.20.B Client architecturePWA shell (Next.js): app\u2011router, service worker, manifest, edge caching; GraphQL via AppSync (JWT auth).Native shells (optional):React Native + Expo (managed workflow) for iOS/Android.Uses a small native bridge for push tokens, file pickers, camera, and device storage; renders either RN screens or a WebView wrapper for certain flows if we choose a hybrid approach.Shared modules: auth/session, GraphQL client, feature flags, Safe\u2011Mode, formatting (ICU), and analytics events shared across PWA and RN.1.20.C PWA configuration (manifest, SW, caching, offline)Recommended path: web/public/manifest.webmanifest{",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.22.3",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3406,
      "line": "1.22.3 Data model (Aurora) \u2014 orders, intents, transfers, refundsRecommended path: db/migrations/022_payments_core.sqlbegin;",
      "title": "Data model (Aurora) \u2014 orders, intents, transfers, refundsRecommended path: db/migrations/022_payments_core.sqlbegin;",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.22.5",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3474,
      "line": "1.22.5 Stripe Connect onboarding (providers)Type: Express accounts; Stripe\u2011hosted onboarding/updates.Enable capabilities for payments/transfers; Stripe handles KYC; we reflect verification status in UI (account.updated webhooks).Payout schedule: weekly by default; consider T+1/T+7 policy gates (see \u00a71.22.11).Artifact \u2014 onboarding link resolver",
      "title": "Stripe Connect onboarding (providers)Type: Express accounts; Stripe\u2011hosted onboarding/updates.Enable capabilities for payments/transfers; Stripe handles KYC; we reflect verification status in UI (account.updated webhooks).Payout schedule: weekly by default; consider T+1/T+7 policy gates (see \u00a71.22.11).Artifact \u2014 onboarding link resolver",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.22.6",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3485,
      "line": "1.22.6 Charges & transfers patternChoose one per order for simplicity:Destination chargeCharge on connected account; include application_fee_amount.Pros: Simple split; Stripe handles fee. Cons: Fewer methods; less transfer timing control.Separate charges & transfers (recommended)Charge on platform; attach transfer_group=order_id; create Transfer to provider on completion.Pros: Full payout timing control; clean refunds. Cons: Platform temporarily carries liability.1.22.7 Webhooks, idempotency & order state machineListen to:",
      "title": "Charges & transfers patternChoose one per order for simplicity:Destination chargeCharge on connected account; include application_fee_amount.Pros: Simple split; Stripe handles fee. Cons: Fewer methods; less transfer timing control.Separate charges & transfers (recommended)Charge on platform; attach transfer_group=order_id; create Transfer to provider on completion.Pros: Full payout timing control; clean refunds. Cons: Platform temporarily carries liability.1.22.7 Webhooks, idempotency & order state machineListen to:",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.22.9",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3510,
      "line": "1.22.9 Credits, vouchers & taxesCredits (referral/promos) reduce platform fee (buyer_fee) only unless promo explicitly subsidizes subtotal.If a promo reduces subtotal, it\u2019s platform\u2011funded; treat as negative revenue in analytics.Tax on platform fees depends on jurisdiction; at launch either (a) enable Stripe Tax for the fee component, or (b) restrict to jurisdictions where fees are non\u2011taxable. Provider service tax remains provider\u2019s responsibility at launch; we show guidance.Artifact \u2014 platform invoice MJML (fee line item)",
      "title": "Credits, vouchers & taxesCredits (referral/promos) reduce platform fee (buyer_fee) only unless promo explicitly subsidizes subtotal.If a promo reduces subtotal, it\u2019s platform\u2011funded; treat as negative revenue in analytics.Tax on platform fees depends on jurisdiction; at launch either (a) enable Stripe Tax for the fee component, or (b) restrict to jurisdictions where fees are non\u2011taxable. Provider service tax remains provider\u2019s responsibility at launch; we show guidance.Artifact \u2014 platform invoice MJML (fee line item)",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.22.11",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3516,
      "line": "1.22.11 Fraud controls & risk flags (tied to \u00a71.18 / \u00a71.15)Signals: rapid multi\u2011card attempts, device fingerprint mismatch, same IP across multiple buyers, new provider with unusually high prices, excessive outbound messages/spam.Actions: enforce 3DS on high\u2011risk cards, manual review holds, increase reserve, delay transfer until IDV passes.Every decision is written to the immutable audit trail (see \u00a71.18.H).1.22.12 Reconciliation \u2014 ledgers & analytics lakeBronze: raw webhook dumps + Stripe balance transactions \u2192 S3.",
      "title": "Fraud controls & risk flags (tied to \u00a71.18 / \u00a71.15)Signals: rapid multi\u2011card attempts, device fingerprint mismatch, same IP across multiple buyers, new provider with unusually high prices, excessive outbound messages/spam.Actions: enforce 3DS on high\u2011risk cards, manual review holds, increase reserve, delay transfer until IDV passes.Every decision is written to the immutable audit trail (see \u00a71.18.H).1.22.12 Reconciliation \u2014 ledgers & analytics lakeBronze: raw webhook dumps + Stripe balance transactions \u2192 S3.",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.22.14",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3545,
      "line": "1.22.14 Telemetry, SLOs & costEvents: checkout.start|confirm|success|fail, refund.create, dispute.open|won|lost, transfer.create|paid, payout.paid|failed.KPIs: checkout conversion, authorization/capture rates, refund %, dispute %, T+N transfer SLA, webhook latency.SLOs: payment success p50 \u2265 96% (cards); webhook processing p95 \u2264 2s; transfer execution after completion p95 \u2264 15m; D+1 reconciliation completeness by 08:00 UTC.Cost posture: Stripe only at launch; ACH only when volume justifies; no third\u2011party fraud SaaS initially\u2014rely on Stripe Radar + our risk flags; serverless webhooks & nightly reconciliation to keep compute low.1.22.15 Test planCard happy path (with/without credits), receipts.Manual capture (authorize, capture/void) path.Refunds (full/partial) per policy; credits re\u2011application logic.Disputes lifecycle (open \u2192 evidence \u2192 closed win/loss) and payout clawback/release.ACH flow (when enabled): settlement timing; transfer after funds clear.Webhooks idempotency: replay same event.id \u2192 no duplicate effects.Reconciliation: balance transactions vs ledgers; variance \u2264 $0.01 per order.Risk: forced 3DS; rate\u2011limit card attempts; apply reserve.1.22.16 Work packages (Cursor 4\u2011agent lanes)Agent A \u2014 Buyer Checkout & Credits: PI creation/confirm, credits application, receipts, error handling.Agent B \u2014 Provider Onboarding & Payouts: Connect Express flow, payout schedule/reserves, transfer logic, statements.Agent C \u2014 Webhooks & Reconciliation: webhook lambdas + idempotency, ledgers, daily Stripe exports, Silver model & dashboards.Agent D \u2014 Admin & Risk: finance console, refunds/holds/releases, dispute evidence packs, risk flagging & decisions.1.22.17 Acceptance criteria \u2014 mark \u00a71.22 FINAL only when ALL trueCheckout supports cards (Apple/Google Pay where available); credits apply to buyer_fee only; orders reach captured.Provider onboarding via Connect Express; payouts scheduled per policy; reserves supported.Webhooks idempotent; state machine transitions correct; clawbacks/holds work.Refunds/disputes complete end\u2011to\u2011end with accurate ledger entries and communications.Separate charges & transfers implemented with controllable transfer timing; reconciliation (Silver) runs without variances.Admin console (role\u2011gated) supports refund/hold/release & evidence; all actions audited.KPIs/SLOs measured with alerts; D+1 reconciliation completes by 08:00 UTC.Costs within launch budgets; ACH deferred until justified.\u00a71.23 \u2014 Messaging, Inbox & Collaboration (Technical Spec)Scope: This section implements the non\u2011technical \u201cSubSection 1.4 \u2014 Messaging, Inbox & Collaboration UX\u201d in full technical detail (objects, flows, folders, filters, credits, action cards, safety controls). The non\u2011technical goals include role\u2011aware & booking\u2011aware threads, a single source of truth for chat + project context, respectful fast communication (receipts, templates), and strong safety/anti\u2011circumvention tooling, including report/block and rate limits. NonTechBlueprintIn addition, Trust & Safety requires Safe\u2011Mode behavior on previews, reporting flows, escalation, and harassment/doXXing protections that also apply inside messaging. NonTechBlueprint_Part31.23.1 Canon & InvariantsRole\u2011aware, Booking\u2011aware: Every thread is anchored to a Role Context (service profile) and, when applicable, a Booking. This mirrors the non\u2011tech \u201cRoleaware & Bookingaware\u201d principle. NonTechBlueprintSingle source of truth: Messages + structured Project Panel context (package, schedule, call sheet, contracts, deliverables, extras, payments) co\u2011exist in the thread. NonTechBlueprintStructured \u201cAction Cards\u201d: time proposals/reschedules, add\u2011ons, overtime, proofs/finals, approvals, expense receipts, mark\u2011completed, open dispute, share location, safety flag\u2014sent as typed, machine\u2011readable cards. NonTechBlueprintMessage Requests & Credits: First\u2011time contacts land in Requests; users can Accept/Decline/Block. New conversation credits throttle cold outreach; replies and booking\u2011thread messaging remain unlimited. Contact filters (ID\u2011verified only, budget disclosed, date provided) are enforced before a message can be sent. NonTechBlueprintSafety & Policy: Prominent Report/Block, rate limits, spam detection, and PII redaction tools for support are required. Messaging must respect Safe\u2011Mode on previews and use the policy escalation flows. NonTechBlueprint_Part3Privacy: No sensitive EXIF by default on uploads; redactable message copies for legal/dispute workflows.Cost posture: Serverless realtime (AppSync + DynamoDB + S3 + Lambda) with pay\u2011per\u2011use; Typesense (shared) for message search snippets.1.23.2 Data ModelWe follow the non\u2011tech \u201cObjects (data model at a glance)\u201d\u2014Thread, Message, Attachment, and Project\u2014while adding normalized/denormalized details to meet performance and safety requirements. NonTechBlueprint1.23.2.1 DynamoDB (primary, realtime path)Table: msg_threads (PK = threadId, SK = constant)",
      "title": "Telemetry, SLOs & costEvents: checkout.start|confirm|success|fail, refund.create, dispute.open|won|lost, transfer.create|paid, payout.paid|failed.KPIs: checkout conversion, authorization/capture rates, refund %, dispute %, T+N transfer SLA, webhook latency.SLOs: payment success p50 \u2265 96% (cards); webhook processing p95 \u2264 2s; transfer execution after completion p95 \u2264 15m; D+1 reconciliation completeness by 08:00 UTC.Cost posture: Stripe only at launch; ACH only when volume justifies; no third\u2011party fraud SaaS initially\u2014rely on Stripe Radar + our risk flags; serverless webhooks & nightly reconciliation to keep compute low.1.22.15 Test planCard happy path (with/without credits), receipts.Manual capture (authorize, capture/void) path.Refunds (full/partial) per policy; credits re\u2011application logic.Disputes lifecycle (open \u2192 evidence \u2192 closed win/loss) and payout clawback/release.ACH flow (when enabled): settlement timing; transfer after funds clear.Webhooks idempotency: replay same event.id \u2192 no duplicate effects.Reconciliation: balance transactions vs ledgers; variance \u2264 $0.01 per order.Risk: forced 3DS; rate\u2011limit card attempts; apply reserve.1.22.16 Work packages (Cursor 4\u2011agent lanes)Agent A \u2014 Buyer Checkout & Credits: PI creation/confirm, credits application, receipts, error handling.Agent B \u2014 Provider Onboarding & Payouts: Connect Express flow, payout schedule/reserves, transfer logic, statements.Agent C \u2014 Webhooks & Reconciliation: webhook lambdas + idempotency, ledgers, daily Stripe exports, Silver model & dashboards.Agent D \u2014 Admin & Risk: finance console, refunds/holds/releases, dispute evidence packs, risk flagging & decisions.1.22.17 Acceptance criteria \u2014 mark \u00a71.22 FINAL only when ALL trueCheckout supports cards (Apple/Google Pay where available); credits apply to buyer_fee only; orders reach captured.Provider onboarding via Connect Express; payouts scheduled per policy; reserves supported.Webhooks idempotent; state machine transitions correct; clawbacks/holds work.Refunds/disputes complete end\u2011to\u2011end with accurate ledger entries and communications.Separate charges & transfers implemented with controllable transfer timing; reconciliation (Silver) runs without variances.Admin console (role\u2011gated) supports refund/hold/release & evidence; all actions audited.KPIs/SLOs measured with alerts; D+1 reconciliation completes by 08:00 UTC.Costs within launch budgets; ACH deferred until justified.\u00a71.23 \u2014 Messaging, Inbox & Collaboration (Technical Spec)Scope: This section implements the non\u2011technical \u201cSubSection 1.4 \u2014 Messaging, Inbox & Collaboration UX\u201d in full technical detail (objects, flows, folders, filters, credits, action cards, safety controls). The non\u2011technical goals include role\u2011aware & booking\u2011aware threads, a single source of truth for chat + project context, respectful fast communication (receipts, templates), and strong safety/anti\u2011circumvention tooling, including report/block and rate limits. NonTechBlueprintIn addition, Trust & Safety requires Safe\u2011Mode behavior on previews, reporting flows, escalation, and harassment/doXXing protections that also apply inside messaging. NonTechBlueprint_Part31.23.1 Canon & InvariantsRole\u2011aware, Booking\u2011aware: Every thread is anchored to a Role Context (service profile) and, when applicable, a Booking. This mirrors the non\u2011tech \u201cRoleaware & Bookingaware\u201d principle. NonTechBlueprintSingle source of truth: Messages + structured Project Panel context (package, schedule, call sheet, contracts, deliverables, extras, payments) co\u2011exist in the thread. NonTechBlueprintStructured \u201cAction Cards\u201d: time proposals/reschedules, add\u2011ons, overtime, proofs/finals, approvals, expense receipts, mark\u2011completed, open dispute, share location, safety flag\u2014sent as typed, machine\u2011readable cards. NonTechBlueprintMessage Requests & Credits: First\u2011time contacts land in Requests; users can Accept/Decline/Block. New conversation credits throttle cold outreach; replies and booking\u2011thread messaging remain unlimited. Contact filters (ID\u2011verified only, budget disclosed, date provided) are enforced before a message can be sent. NonTechBlueprintSafety & Policy: Prominent Report/Block, rate limits, spam detection, and PII redaction tools for support are required. Messaging must respect Safe\u2011Mode on previews and use the policy escalation flows. NonTechBlueprint_Part3Privacy: No sensitive EXIF by default on uploads; redactable message copies for legal/dispute workflows.Cost posture: Serverless realtime (AppSync + DynamoDB + S3 + Lambda) with pay\u2011per\u2011use; Typesense (shared) for message search snippets.1.23.2 Data ModelWe follow the non\u2011tech \u201cObjects (data model at a glance)\u201d\u2014Thread, Message, Attachment, and Project\u2014while adding normalized/denormalized details to meet performance and safety requirements. NonTechBlueprint1.23.2.1 DynamoDB (primary, realtime path)Table: msg_threads (PK = threadId, SK = constant)",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.26.7",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3826,
      "line": "1.26.7 JIT access & privacy guardrailsCase\u2011bound scopes: to open any message or attachment, an admin must attach it to an open case; access grants are time\u2011boxed (e.g., 2 hours) and auto\u2011revoked when case status changes.View/download of sensitive artifacts (IDs, invoices, door codes) uses signed, single\u2011use URLs with short TTL.All views generate admin_audit entries with IP/UA and the case id.1.26.8 Observability & SLAsEvent taxonomy: admin.login, admin.case.create|act|close, admin.user.suspend|reinstate, admin.refund|hold|release, admin.template.publish, admin.search.pin, admin.synonym.upsert, admin.flag.set, admin.audit.view.Dashboards: case backlog & aging, time\u2011to\u2011first\u2011response, time\u2011to\u2011resolution, dispute outcomes, refund rate, appeal win rate, moderator workload, finance queue length, search pin performance.SLOs:Reports triaged p95 \u2264 4h (business hours)Disputes resolved p95 \u2264 5 daysFinance webhook\u2192action p95 \u2264 15mAudit write availability 99.99%1.26.9 Content & SEO operations (light CMS)Admin UI to author help articles (Markdown\u2192HTML), announcements, and city snippets (meta description/intro copy).All content is versioned, localized (ties to \u00a71.19), and pre\u2011rendered for SEO; Safe\u2011Mode always respected on public surfaces.1.26.10 Rate\u2011limit & risk tuningSliders/toggles for message starts/hour, signup/IP/day, search API burst, payments 3DS threshold.Changes require two\u2011person approval (4\u2011eyes) for high\u2011impact risk knobs; change\u2011log recorded in audit.1.26.11 Feature flags & configFlags: Instant Book eligibility, response SLA, deposit capture policy, city activation, Studio Lite requirement for IB, Saved\u2011search digests cadence.Backed by DynamoDB table with typed schema, exposed read\u2011only to clients via CDN JSON for fast boot (signed, cache\u2011controlled).1.26.12 CI/CD & access controlsAdmin app deploys to a separate Amplify environment / CloudFront distribution.SSO required for any access; WAF blocks public traffic; IP allowlist; rate\u2011limits.Secrets in AWS Secrets Manager; no admin credentials in code.1.26.13 Test planRBAC: each role\u2019s allowed/denied actions enforced; step\u2011up auth for finance/disputes.Cases: create/triage/resolve; SLA timers and notifications.User: suspend/reinstate; DSAR export; deletion request workflow.Listings: publish/unpublish; hazard/surveillance flags; COI required.Finance: refund/hold/release; reconciliation viewer; audit entries present.Search curation: pins & synonyms appear in search; TTL expiry works.Docs admin: template publish; envelope monitor; evidence view.CMS: help/announcement create & publish; localization; SEO pre\u2011render.JIT access: cannot open messages without case; time\u2011boxed access revokes properly.Audit: 100% of admin actions write to admin_audit and S3 WORM stream.1.26.14 Work packages (Cursor 4\u2011agent lanes)Agent A \u2014 RBAC, Cases & Audit: schema, resolvers, case flows, immutable audit, JIT access.Agent B \u2014 Ops UIs: user/listing management, T&S workbench, finance console, curation tools, CMS screens.Agent C \u2014 Flags & Risk: feature flags backend, risk knobs, rate\u2011limits, city activation controls.Agent D \u2014 Observability & SSO: SSO/OIDC integration, step\u2011up auth, dashboards, alerts, WAF/IP allowlist.1.26.15 Acceptance criteria \u2014 mark \u00a71.26 FINAL only when ALL trueRBAC & SSO enforced; destructive actions require step\u2011up; least privilege verified.Cases (reports/DMCA/disputes/fraud) run end\u2011to\u2011end with SLA timers, evidence capture, and outcome recording.Finance console performs refunds, holds, releases; reconciliation viewers work; audit exists.Listing and user moderation tools operate with privacy safeguards; messaging access is case\u2011bound and time\u2011boxed.Search curation and Smart Docs admin functions are live; CMS can publish localized help/announcements/city snippets.Feature flags & risk knobs adjustable with audit trails and (for high\u2011impact) 4\u2011eyes approval.Observability dashboards and SLO alerts are active; audit stream is immutable (S3 Object Lock).Costs and security controls match launch posture (serverless, CloudFront+WAF, IP allowlist).\u00a71.27 \u2014 SEO & On\u2011Site Optimization \u2014 Full Technical Spec(crawl control \u00b7 SSR/ISR build strategy \u00b7 canonical/robots/sitemaps \u00b7 structured data \u00b7 pagination & faceted navigation \u00b7 Safe\u2011Mode & SFW indexing \u00b7 media/OG tags \u00b7 Core Web Vitals budgets \u00b7 internal linking \u00b7 error/redirect policy \u00b7 analytics & monitoring \u00b7 tests \u00b7 acceptance)Purpose. Implement an SEO system that safely exposes only SFW content, scales city/role/studio listings without creating crawl traps, and drives qualified discovery for People and Studios. This fills the non\u2011technical gap you flagged and ties into earlier sections (Search \u00a71.21, Studios \u00a71.24, Messaging \u00a71.23, Payments \u00a71.22, Admin \u00a71.26).1.27.1 Canon & invariantsSFW\u2011only indexing. Public pages (profiles, studios, city pages) must render SFW previews and noindex any page that would expose 18+ content or paid assets. Safe\u2011Mode OFF areas are never indexed.Stable URLs & canonical rules. We allow a small, controlled set of query params to be indexed; everything else is canonicalized to a base URL to avoid duplicate content and crawl traps.SSR/ISR. City & directory pages use Next.js SSR + Incremental Static Regeneration (ISR) for speed and freshness; profiles/studios use SSR with short revalidation.Lightweight structured data. We publish JSON\u2011LD for Person (People profiles), Place (Studios), and BreadcrumbList on directories; never include exact addresses on public Studio pages (privacy).Crawl budget control. We pre\u2011render and surface only \u201cthin\u2011spine\u201d pages (Cities \u00d7 Roles/Genres), not combinatorial facets.Performance first. Core Web Vitals (CWV) budgets are enforced at build and runtime (LCP, INP, CLS).1.27.2 URL design & routingPages (examples):City directory: /tx/houston/models (/state/city/role)Genre slice: /tx/houston/models/editorialStudio directory: /tx/houston/studiosProfile: /p/{handle} (SFW profile)Studio: /s/{slug} (SFW listing; exact address hidden)Content hubs / guides (optional): /guides/houston-photography-studiosCanonical param whitelist: ?page=, ?sort= limited to best|new|price_low|price_high|distance when an origin exists. All other params are dropped in canonicals. Deep facet queries (ANY/ALL filters) do not get indexable canonicals.1.27.3 Canonical, robots, and meta tagsRecommended path: web/lib/seo/canonical.tsexport function canonicalFor(url: URL) {",
      "title": "JIT access & privacy guardrailsCase\u2011bound scopes: to open any message or attachment, an admin must attach it to an open case; access grants are time\u2011boxed (e.g., 2 hours) and auto\u2011revoked when case status changes.View/download of sensitive artifacts (IDs, invoices, door codes) uses signed, single\u2011use URLs with short TTL.All views generate admin_audit entries with IP/UA and the case id.1.26.8 Observability & SLAsEvent taxonomy: admin.login, admin.case.create|act|close, admin.user.suspend|reinstate, admin.refund|hold|release, admin.template.publish, admin.search.pin, admin.synonym.upsert, admin.flag.set, admin.audit.view.Dashboards: case backlog & aging, time\u2011to\u2011first\u2011response, time\u2011to\u2011resolution, dispute outcomes, refund rate, appeal win rate, moderator workload, finance queue length, search pin performance.SLOs:Reports triaged p95 \u2264 4h (business hours)Disputes resolved p95 \u2264 5 daysFinance webhook\u2192action p95 \u2264 15mAudit write availability 99.99%1.26.9 Content & SEO operations (light CMS)Admin UI to author help articles (Markdown\u2192HTML), announcements, and city snippets (meta description/intro copy).All content is versioned, localized (ties to \u00a71.19), and pre\u2011rendered for SEO; Safe\u2011Mode always respected on public surfaces.1.26.10 Rate\u2011limit & risk tuningSliders/toggles for message starts/hour, signup/IP/day, search API burst, payments 3DS threshold.Changes require two\u2011person approval (4\u2011eyes) for high\u2011impact risk knobs; change\u2011log recorded in audit.1.26.11 Feature flags & configFlags: Instant Book eligibility, response SLA, deposit capture policy, city activation, Studio Lite requirement for IB, Saved\u2011search digests cadence.Backed by DynamoDB table with typed schema, exposed read\u2011only to clients via CDN JSON for fast boot (signed, cache\u2011controlled).1.26.12 CI/CD & access controlsAdmin app deploys to a separate Amplify environment / CloudFront distribution.SSO required for any access; WAF blocks public traffic; IP allowlist; rate\u2011limits.Secrets in AWS Secrets Manager; no admin credentials in code.1.26.13 Test planRBAC: each role\u2019s allowed/denied actions enforced; step\u2011up auth for finance/disputes.Cases: create/triage/resolve; SLA timers and notifications.User: suspend/reinstate; DSAR export; deletion request workflow.Listings: publish/unpublish; hazard/surveillance flags; COI required.Finance: refund/hold/release; reconciliation viewer; audit entries present.Search curation: pins & synonyms appear in search; TTL expiry works.Docs admin: template publish; envelope monitor; evidence view.CMS: help/announcement create & publish; localization; SEO pre\u2011render.JIT access: cannot open messages without case; time\u2011boxed access revokes properly.Audit: 100% of admin actions write to admin_audit and S3 WORM stream.1.26.14 Work packages (Cursor 4\u2011agent lanes)Agent A \u2014 RBAC, Cases & Audit: schema, resolvers, case flows, immutable audit, JIT access.Agent B \u2014 Ops UIs: user/listing management, T&S workbench, finance console, curation tools, CMS screens.Agent C \u2014 Flags & Risk: feature flags backend, risk knobs, rate\u2011limits, city activation controls.Agent D \u2014 Observability & SSO: SSO/OIDC integration, step\u2011up auth, dashboards, alerts, WAF/IP allowlist.1.26.15 Acceptance criteria \u2014 mark \u00a71.26 FINAL only when ALL trueRBAC & SSO enforced; destructive actions require step\u2011up; least privilege verified.Cases (reports/DMCA/disputes/fraud) run end\u2011to\u2011end with SLA timers, evidence capture, and outcome recording.Finance console performs refunds, holds, releases; reconciliation viewers work; audit exists.Listing and user moderation tools operate with privacy safeguards; messaging access is case\u2011bound and time\u2011boxed.Search curation and Smart Docs admin functions are live; CMS can publish localized help/announcements/city snippets.Feature flags & risk knobs adjustable with audit trails and (for high\u2011impact) 4\u2011eyes approval.Observability dashboards and SLO alerts are active; audit stream is immutable (S3 Object Lock).Costs and security controls match launch posture (serverless, CloudFront+WAF, IP allowlist).\u00a71.27 \u2014 SEO & On\u2011Site Optimization \u2014 Full Technical Spec(crawl control \u00b7 SSR/ISR build strategy \u00b7 canonical/robots/sitemaps \u00b7 structured data \u00b7 pagination & faceted navigation \u00b7 Safe\u2011Mode & SFW indexing \u00b7 media/OG tags \u00b7 Core Web Vitals budgets \u00b7 internal linking \u00b7 error/redirect policy \u00b7 analytics & monitoring \u00b7 tests \u00b7 acceptance)Purpose. Implement an SEO system that safely exposes only SFW content, scales city/role/studio listings without creating crawl traps, and drives qualified discovery for People and Studios. This fills the non\u2011technical gap you flagged and ties into earlier sections (Search \u00a71.21, Studios \u00a71.24, Messaging \u00a71.23, Payments \u00a71.22, Admin \u00a71.26).1.27.1 Canon & invariantsSFW\u2011only indexing. Public pages (profiles, studios, city pages) must render SFW previews and noindex any page that would expose 18+ content or paid assets. Safe\u2011Mode OFF areas are never indexed.Stable URLs & canonical rules. We allow a small, controlled set of query params to be indexed; everything else is canonicalized to a base URL to avoid duplicate content and crawl traps.SSR/ISR. City & directory pages use Next.js SSR + Incremental Static Regeneration (ISR) for speed and freshness; profiles/studios use SSR with short revalidation.Lightweight structured data. We publish JSON\u2011LD for Person (People profiles), Place (Studios), and BreadcrumbList on directories; never include exact addresses on public Studio pages (privacy).Crawl budget control. We pre\u2011render and surface only \u201cthin\u2011spine\u201d pages (Cities \u00d7 Roles/Genres), not combinatorial facets.Performance first. Core Web Vitals (CWV) budgets are enforced at build and runtime (LCP, INP, CLS).1.27.2 URL design & routingPages (examples):City directory: /tx/houston/models (/state/city/role)Genre slice: /tx/houston/models/editorialStudio directory: /tx/houston/studiosProfile: /p/{handle} (SFW profile)Studio: /s/{slug} (SFW listing; exact address hidden)Content hubs / guides (optional): /guides/houston-photography-studiosCanonical param whitelist: ?page=, ?sort= limited to best|new|price_low|price_high|distance when an origin exists. All other params are dropped in canonicals. Deep facet queries (ANY/ALL filters) do not get indexable canonicals.1.27.3 Canonical, robots, and meta tagsRecommended path: web/lib/seo/canonical.tsexport function canonicalFor(url: URL) {",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.27.4",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3835,
      "line": "1.27.4 robots.txt and crawl allowancesRecommended path: web/public/robots.txtUser-agent: *",
      "title": "robots.txt and crawl allowancesRecommended path: web/public/robots.txtUser-agent: *",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.27.6",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3850,
      "line": "1.27.6 Structured data (JSON\u2011LD)A) Person (SFW profile)Recommended path: web/seo/jsonld-person.tsxexport function PersonJsonLd({ p }) {",
      "title": "Structured data (JSON\u2011LD)A) Person (SFW profile)Recommended path: web/seo/jsonld-person.tsxexport function PersonJsonLd({ p }) {",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.27.12",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3868,
      "line": "1.27.12 Error & redirect policy4xx: custom 404 with search module; return 404 (not soft).5xx: friendly error page; Retry-After when under maintenance.Redirects:Legacy slugs preserved via 301; maintain a slug_redirects table (source \u2192 target).Force canonical host (www vs apex) and HTTPS.Trailing slashes normalized.Recommended path: web/next.config.mjs (excerpt)async redirects() { return [",
      "title": "Error & redirect policy4xx: custom 404 with search module; return 404 (not soft).5xx: friendly error page; Retry-After when under maintenance.Redirects:Legacy slugs preserved via 301; maintain a slug_redirects table (source \u2192 target).Force canonical host (www vs apex) and HTTPS.Trailing slashes normalized.Recommended path: web/next.config.mjs (excerpt)async redirects() { return [",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.27.13",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3872,
      "line": "1.27.13 Safe\u2011Mode & SFW gating (SEO)Indexable pages must be Safe\u2011Mode clean: if any visible component would render NSFW previews, return noindex,nofollow.Profile/studio completeness: below threshold \u2192 noindex to avoid thin content.Fan\u2011Sub (paid): noindex on all paid content and collection pages; preview pages (teasers) are SFW.1.27.14 Analytics & monitoringGSC integration per environment (prod only).Event taxonomy: seo.published, seo.noindex_applied, seo.sitemap.emit, seo.redirect.hit, seo.ogimage.render.Dashboards: impressions/clicks by city/role, CTR by directory, profile/studio coverage (% indexable), sitemap submission health, crawl errors over time.Alarms: surge in 5xx, sitemap job failures, spike in noindex_applied beyond baseline (could indicate Safe\u2011Mode flagging).1.27.15 Cost postureServerless build & serve: ISR caches on CloudFront; minimal SSR compute.OG image render: edge function cached with low TTL; invalidate only on profile/studio image change.No third\u2011party SEO SaaS required at launch; GSC + internal logs suffice.1.27.16 Artifacts (copy\u2011pasteable)web/public/robots.txt (above)web/pages/sitemap.xml.ts (index builder) + web/pages/sitemaps/*.ts (modular feeds)web/lib/seo/canonical.ts (canonical builder)web/seo/jsonld-person.tsx, web/seo/jsonld-place.tsx, web/seo/jsonld-breadcrumbs.tsxweb/app/(public)/.../opengraph-image.tsx (dynamic OG images)observability/budgets/web.json (CWV budgets)web/next.config.mjs redirects (legacy \u2192 canonical)1.27.17 Test planIndexability matrix: verify index,follow on city listings, SFW profiles/studios; verify noindex,nofollow on any page with NSFW risks, Safe\u2011Mode OFF, or paid content.Canonicals: for facet URLs, canonical points to base; for allowed sorts/pagination, canonical preserves them; prev/next present for paginated listings.Sitemaps: validate XML; GSC fetch succeeds; sitemaps list only indexable URLs; updated on publish/unpublish.JSON\u2011LD: Person/Place/Breadcrumb validate in Rich Results; studios never leak exact address pre\u2011booking.OG/Twitter: correct images and titles; images update on asset change; cached at edge.CWV: Lighthouse CI passes budgets on templates; field beacons report within targets after deploy.Redirects: legacy slugs 301 to current; no redirect loops; canonical host enforced.Error handling: 404 returns hard 404; maintenance returns Retry\u2011After; robots obeys disallows.Security: no PII or paid asset URLs in page source; signed URLs never appear in HTML.1.27.18 Acceptance criteria \u2014 mark \u00a71.27 FINAL only when ALL trueRobots, canonicals, and sitemaps are live; only SFW, complete pages are indexable; combinatorial facets are non\u2011indexable.Profiles (Person) and Studios (Place) emit valid JSON\u2011LD; city/role directories emit BreadcrumbList; no exact studio address is exposed.SSR/ISR strategy implemented; paginated HTML for bots; prev/next and canonical tags correct.OG/Twitter images render with correct caching; redirect rules cover legacy paths.Core Web Vitals budgets enforced (build & field); dashboards and alerts wired; GSC is clean of soft\u2011404 or duplicate\u2011content warnings.Costs remain within launch budgets; no third\u2011party SEO tool lock\u2011ins.\u00a71.28 \u2014 Admin Console, Ops & Support (Back\u2011Office) \u2014 Full Technical Spec(RBAC & SSO \u00b7 immutable audit/WORM \u00b7 user/listing moderation \u00b7 Trust & Safety casework (reports, DMCA, disputes) \u00b7 finance ops & reconciliation \u00b7 search curation tools \u00b7 Smart Docs admin \u00b7 CMS (help/announcements) \u00b7 feature flags & risk knobs \u00b7 observability & SLAs \u00b7 tests \u00b7 acceptance)Purpose. Provide safe, efficient operational tooling to run the marketplace\u2014moderate users/listings, handle reports/DMCA/disputes, operate refunds/payouts, curate search, manage Smart Docs templates, publish help/announcements, tune risk/rate\u2011limits, and observe SLOs\u2014while enforcing least\u2011privilege, case\u2011bound access, and immutable audit.1.28.1 Canon & invariantsLeast privilege + JIT access. Roles narrowly scoped; message/media viewing requires case\u2011bound time\u2011boxed access.Immutable audit. Every admin action is recorded in Aurora and appended to S3 with Object Lock (WORM).Separation of duties. Finance vs Trust & Safety (T&S) vs Support vs Content Ops vs Search Curation vs Docs Admin.Privacy by design. Sensitive artifacts only via short\u2011TTL, single\u2011use signed URLs; all access audited.Cost posture. One Next.js Admin app behind CloudFront + WAF + IP allowlist; serverless APIs (AppSync/Lambda/Data API).1.28.2 Roles & permissions (RBAC)Initial rolessuper_admin (break\u2011glass, time\u2011boxed)trust_safety (reports, DMCA, disputes, suspensions)finance_ops (refunds, payout hold/release, reconciliation views)support (account lookup, resend emails, reset MFA, grant limited credits)content_ops (help/announcements/city SEO snippets)search_curator (pins, synonyms)docs_admin (template/versioning & envelope monitor)engineering (feature flags, config, observability read)Recommended path: admin/rbac/policy.json{",
      "title": "Safe\u2011Mode & SFW gating (SEO)Indexable pages must be Safe\u2011Mode clean: if any visible component would render NSFW previews, return noindex,nofollow.Profile/studio completeness: below threshold \u2192 noindex to avoid thin content.Fan\u2011Sub (paid): noindex on all paid content and collection pages; preview pages (teasers) are SFW.1.27.14 Analytics & monitoringGSC integration per environment (prod only).Event taxonomy: seo.published, seo.noindex_applied, seo.sitemap.emit, seo.redirect.hit, seo.ogimage.render.Dashboards: impressions/clicks by city/role, CTR by directory, profile/studio coverage (% indexable), sitemap submission health, crawl errors over time.Alarms: surge in 5xx, sitemap job failures, spike in noindex_applied beyond baseline (could indicate Safe\u2011Mode flagging).1.27.15 Cost postureServerless build & serve: ISR caches on CloudFront; minimal SSR compute.OG image render: edge function cached with low TTL; invalidate only on profile/studio image change.No third\u2011party SEO SaaS required at launch; GSC + internal logs suffice.1.27.16 Artifacts (copy\u2011pasteable)web/public/robots.txt (above)web/pages/sitemap.xml.ts (index builder) + web/pages/sitemaps/*.ts (modular feeds)web/lib/seo/canonical.ts (canonical builder)web/seo/jsonld-person.tsx, web/seo/jsonld-place.tsx, web/seo/jsonld-breadcrumbs.tsxweb/app/(public)/.../opengraph-image.tsx (dynamic OG images)observability/budgets/web.json (CWV budgets)web/next.config.mjs redirects (legacy \u2192 canonical)1.27.17 Test planIndexability matrix: verify index,follow on city listings, SFW profiles/studios; verify noindex,nofollow on any page with NSFW risks, Safe\u2011Mode OFF, or paid content.Canonicals: for facet URLs, canonical points to base; for allowed sorts/pagination, canonical preserves them; prev/next present for paginated listings.Sitemaps: validate XML; GSC fetch succeeds; sitemaps list only indexable URLs; updated on publish/unpublish.JSON\u2011LD: Person/Place/Breadcrumb validate in Rich Results; studios never leak exact address pre\u2011booking.OG/Twitter: correct images and titles; images update on asset change; cached at edge.CWV: Lighthouse CI passes budgets on templates; field beacons report within targets after deploy.Redirects: legacy slugs 301 to current; no redirect loops; canonical host enforced.Error handling: 404 returns hard 404; maintenance returns Retry\u2011After; robots obeys disallows.Security: no PII or paid asset URLs in page source; signed URLs never appear in HTML.1.27.18 Acceptance criteria \u2014 mark \u00a71.27 FINAL only when ALL trueRobots, canonicals, and sitemaps are live; only SFW, complete pages are indexable; combinatorial facets are non\u2011indexable.Profiles (Person) and Studios (Place) emit valid JSON\u2011LD; city/role directories emit BreadcrumbList; no exact studio address is exposed.SSR/ISR strategy implemented; paginated HTML for bots; prev/next and canonical tags correct.OG/Twitter images render with correct caching; redirect rules cover legacy paths.Core Web Vitals budgets enforced (build & field); dashboards and alerts wired; GSC is clean of soft\u2011404 or duplicate\u2011content warnings.Costs remain within launch budgets; no third\u2011party SEO tool lock\u2011ins.\u00a71.28 \u2014 Admin Console, Ops & Support (Back\u2011Office) \u2014 Full Technical Spec(RBAC & SSO \u00b7 immutable audit/WORM \u00b7 user/listing moderation \u00b7 Trust & Safety casework (reports, DMCA, disputes) \u00b7 finance ops & reconciliation \u00b7 search curation tools \u00b7 Smart Docs admin \u00b7 CMS (help/announcements) \u00b7 feature flags & risk knobs \u00b7 observability & SLAs \u00b7 tests \u00b7 acceptance)Purpose. Provide safe, efficient operational tooling to run the marketplace\u2014moderate users/listings, handle reports/DMCA/disputes, operate refunds/payouts, curate search, manage Smart Docs templates, publish help/announcements, tune risk/rate\u2011limits, and observe SLOs\u2014while enforcing least\u2011privilege, case\u2011bound access, and immutable audit.1.28.1 Canon & invariantsLeast privilege + JIT access. Roles narrowly scoped; message/media viewing requires case\u2011bound time\u2011boxed access.Immutable audit. Every admin action is recorded in Aurora and appended to S3 with Object Lock (WORM).Separation of duties. Finance vs Trust & Safety (T&S) vs Support vs Content Ops vs Search Curation vs Docs Admin.Privacy by design. Sensitive artifacts only via short\u2011TTL, single\u2011use signed URLs; all access audited.Cost posture. One Next.js Admin app behind CloudFront + WAF + IP allowlist; serverless APIs (AppSync/Lambda/Data API).1.28.2 Roles & permissions (RBAC)Initial rolessuper_admin (break\u2011glass, time\u2011boxed)trust_safety (reports, DMCA, disputes, suspensions)finance_ops (refunds, payout hold/release, reconciliation views)support (account lookup, resend emails, reset MFA, grant limited credits)content_ops (help/announcements/city SEO snippets)search_curator (pins, synonyms)docs_admin (template/versioning & envelope monitor)engineering (feature flags, config, observability read)Recommended path: admin/rbac/policy.json{",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.28.7",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3950,
      "line": "1.28.7 JIT access & privacy guardrailsCase\u2011bound scopes grant temporary read (and limited reply where policy allows) to specific threads/media.Sensitive artifacts (IDs, invoices, door codes) are served only by short\u2011TTL, single\u2011use signed URLs; downloads counted and audited.All access writes an admin_audit record with case id, IP, UA, and reason.1.28.8 Observability & SLAsEvents: admin.login, admin.case.create|act|close, admin.user.suspend|reinstate, admin.refund|hold|release, admin.search.pin, admin.synonym.upsert, admin.template.publish, admin.flag.set, admin.audit.view.Dashboards: case backlog/aging, time\u2011to\u2011first\u2011response, time\u2011to\u2011resolution, dispute outcomes, refund rate, moderator workload, finance queue length, pin performance.SLOs:Report triage p95 \u2264 4h (business hours)Dispute resolution p95 \u2264 5 daysFinance webhook\u2192action p95 \u2264 15mAudit write availability 99.99%1.28.9 CMS & SEO ops (public content)Markdown editor with preview; scheduled publish/unpublish; locale keys; image handling (alt text required); SEO pre\u2011render.Safe\u2011Mode enforced on public surfaces; no NSFW in help/announcements.1.28.10 Rate\u2011limit & risk tuningToken buckets for message starts/hour, signup/IP/day; 3DS enforcement threshold sliders.High\u2011impact changes require two\u2011person approval; changes are audited with before/after values.1.28.11 Feature flags & configurationFlags stored in DynamoDB with typed schema; read\u2011only, signed JSON snapshot exposed via CDN to clients for fast boot.Secrets stored in AWS Secrets Manager; no keys in code.1.28.12 CI/CD & access controlsAdmin app deployed to a dedicated Amplify/CloudFront stack; WAF and IP allowlist required.SSO enforced for all routes; break\u2011glass elevation requires ticket id; logs routed to centralized logging with retention.1.28.13 Test planRBAC matrix enforced; step\u2011up auth for finance/disputes.Cases: create/triage/resolve; SLA timers and notifications; evidence upload/review.User moderation: suspend/reinstate; DSAR export/deletion flow with legal hold exceptions.Listing moderation: publish/unpublish; hazard & surveillance flags; COI required.Finance ops: refund/hold/release; reconciliation viewer; audit entries present.Search curation: pins/synonyms propagate; TTL expiry works; zero\u2011results insights populated.Docs admin: template publish; envelope status monitor; resend/void; expiry knobs apply.CMS: help/announcement creation; localization; SEO pre\u2011render.JIT access: cannot open messages without an open case; grants auto\u2011expire.Audit/WORM: 100% of actions mirrored to S3 Object Lock; tamper attempts rejected.1.28.14 Work packages (Cursor 4\u2011agent lanes)Agent A \u2014 RBAC, Cases & Audit: schema, resolvers, case queues, immutable audit, JIT access.Agent B \u2014 Ops UIs: user/listing mgmt, T&S workbench, finance console, curation tools, CMS.Agent C \u2014 Flags & Risk: flag backend, risk knobs, 4\u2011eyes workflow, city activation controls.Agent D \u2014 SSO/Observability: OIDC groups/roles, WebAuthn step\u2011up, dashboards, alerts, WAF/IP allowlist.1.28.15 Acceptance criteria \u2014 mark \u00a71.28 FINAL only when ALL trueRBAC & SSO enforced; destructive/financial actions require step\u2011up; least\u2011privilege verified.Casework (reports/DMCA/disputes/fraud) runs end\u2011to\u2011end with SLA timers, evidence capture, and outcomes recorded.Finance console performs refunds, payout holds/releases; reconciliation viewers operate; all actions audited.Listing & user moderation tools function with privacy safeguards; message/media access is case\u2011bound and time\u2011boxed.Search curation and Smart Docs admin are operational; CMS publishes localized help/announcements/city snippets.Feature flags & risk knobs adjustable with 4\u2011eyes approval; complete audit trail.Observability dashboards live; SLO alerts wired; audit stream is immutable (S3 Object Lock).Costs/security match launch posture (serverless, CloudFront+WAF, IP allowlist).\u00a71.29 \u2014 Case Studies, Portfolios & Boards \u2014 Full Technical SpecPurpose. Showcase real work (case studies, portfolio sets) on role profiles to increase buyer trust and conversion; allow collaborators to be tagged and approve credits; let buyers and producers collect favorites on Boards and launch \u201cRequest a similar shoot\u201d flows. All public surfaces must remain SFW with Safe\u2011Mode gating, collaborator approvals, and DMCA/abuse handling. This section implements the non\u2011technical acceptance: portfolio tab on profiles; tagging & approvals; collaborator links to profiles; \u201cAdd to Board\u201d; Safe\u2011Mode/SFW only; and editor tools in the owner dashboard. NonTechBlueprint1.29.1 Scope (from non\u2011technical plan \u2192 technical)Portfolio tab on public role profiles with SFW media, grids/galleries, and case\u2011study stories. Owner dashboard includes a Portfolio editor. NonTechBlueprintTag collaborators on portfolio items; collaborators must approve or decline the credit before their avatar/name appears; collaborator chips open profiles. NonTechBlueprintBoards (collections) across People, Studios, and Portfolio items; Add to Board from any eligible card; event telemetry board.add. NonTechBlueprintStudio linking: portfolio items can show the studio used and link to that studio page; role profiles can show \u201cHas/Owns Studio\u201d chips; telemetry studio.link.click. NonTechBlueprintSafe\u2011Mode: public surfaces remain SFW; anything beyond permitted tiers is hidden or \u201cblurred with label\u201d per policy when Safe\u2011Mode is ON. NonTechBlueprint1.29.2 Architecture (cost\u2011conscious, elastic)Frontend: Next.js (web) SSR for profile tabs; React Native (mobile) with identical data shape.API: AppSync GraphQL with Lambda resolvers.Storage: S3 (versioned) for images/video; CloudFront delivery; optional on\u2011upload transforms (thumbs, web\u2011optimized).Search/Discovery: Typesense collections for light faceting (\u201cgenres\u201d, \u201ccity\u201d, \u201crole\u201d), plus profile ranking signals.Moderation & policy: Safe\u2011Mode renderer + optional Rekognition moderation check; DMCA/T&S flows via Admin (\u00a71.28).Cost posture: No external DAM/SaaS. S3 lifecycle \u2192 IA/Glacier; CloudFront caching; transforms cached.1.29.3 Data model (Aurora PostgreSQL + S3)Tables (schema portfolio)portfolio_itemitem_id pk, owner_user_id, role_profile_id, title, slug, city, shoot_date, genres text[],",
      "title": "JIT access & privacy guardrailsCase\u2011bound scopes grant temporary read (and limited reply where policy allows) to specific threads/media.Sensitive artifacts (IDs, invoices, door codes) are served only by short\u2011TTL, single\u2011use signed URLs; downloads counted and audited.All access writes an admin_audit record with case id, IP, UA, and reason.1.28.8 Observability & SLAsEvents: admin.login, admin.case.create|act|close, admin.user.suspend|reinstate, admin.refund|hold|release, admin.search.pin, admin.synonym.upsert, admin.template.publish, admin.flag.set, admin.audit.view.Dashboards: case backlog/aging, time\u2011to\u2011first\u2011response, time\u2011to\u2011resolution, dispute outcomes, refund rate, moderator workload, finance queue length, pin performance.SLOs:Report triage p95 \u2264 4h (business hours)Dispute resolution p95 \u2264 5 daysFinance webhook\u2192action p95 \u2264 15mAudit write availability 99.99%1.28.9 CMS & SEO ops (public content)Markdown editor with preview; scheduled publish/unpublish; locale keys; image handling (alt text required); SEO pre\u2011render.Safe\u2011Mode enforced on public surfaces; no NSFW in help/announcements.1.28.10 Rate\u2011limit & risk tuningToken buckets for message starts/hour, signup/IP/day; 3DS enforcement threshold sliders.High\u2011impact changes require two\u2011person approval; changes are audited with before/after values.1.28.11 Feature flags & configurationFlags stored in DynamoDB with typed schema; read\u2011only, signed JSON snapshot exposed via CDN to clients for fast boot.Secrets stored in AWS Secrets Manager; no keys in code.1.28.12 CI/CD & access controlsAdmin app deployed to a dedicated Amplify/CloudFront stack; WAF and IP allowlist required.SSO enforced for all routes; break\u2011glass elevation requires ticket id; logs routed to centralized logging with retention.1.28.13 Test planRBAC matrix enforced; step\u2011up auth for finance/disputes.Cases: create/triage/resolve; SLA timers and notifications; evidence upload/review.User moderation: suspend/reinstate; DSAR export/deletion flow with legal hold exceptions.Listing moderation: publish/unpublish; hazard & surveillance flags; COI required.Finance ops: refund/hold/release; reconciliation viewer; audit entries present.Search curation: pins/synonyms propagate; TTL expiry works; zero\u2011results insights populated.Docs admin: template publish; envelope status monitor; resend/void; expiry knobs apply.CMS: help/announcement creation; localization; SEO pre\u2011render.JIT access: cannot open messages without an open case; grants auto\u2011expire.Audit/WORM: 100% of actions mirrored to S3 Object Lock; tamper attempts rejected.1.28.14 Work packages (Cursor 4\u2011agent lanes)Agent A \u2014 RBAC, Cases & Audit: schema, resolvers, case queues, immutable audit, JIT access.Agent B \u2014 Ops UIs: user/listing mgmt, T&S workbench, finance console, curation tools, CMS.Agent C \u2014 Flags & Risk: flag backend, risk knobs, 4\u2011eyes workflow, city activation controls.Agent D \u2014 SSO/Observability: OIDC groups/roles, WebAuthn step\u2011up, dashboards, alerts, WAF/IP allowlist.1.28.15 Acceptance criteria \u2014 mark \u00a71.28 FINAL only when ALL trueRBAC & SSO enforced; destructive/financial actions require step\u2011up; least\u2011privilege verified.Casework (reports/DMCA/disputes/fraud) runs end\u2011to\u2011end with SLA timers, evidence capture, and outcomes recorded.Finance console performs refunds, payout holds/releases; reconciliation viewers operate; all actions audited.Listing & user moderation tools function with privacy safeguards; message/media access is case\u2011bound and time\u2011boxed.Search curation and Smart Docs admin are operational; CMS publishes localized help/announcements/city snippets.Feature flags & risk knobs adjustable with 4\u2011eyes approval; complete audit trail.Observability dashboards live; SLO alerts wired; audit stream is immutable (S3 Object Lock).Costs/security match launch posture (serverless, CloudFront+WAF, IP allowlist).\u00a71.29 \u2014 Case Studies, Portfolios & Boards \u2014 Full Technical SpecPurpose. Showcase real work (case studies, portfolio sets) on role profiles to increase buyer trust and conversion; allow collaborators to be tagged and approve credits; let buyers and producers collect favorites on Boards and launch \u201cRequest a similar shoot\u201d flows. All public surfaces must remain SFW with Safe\u2011Mode gating, collaborator approvals, and DMCA/abuse handling. This section implements the non\u2011technical acceptance: portfolio tab on profiles; tagging & approvals; collaborator links to profiles; \u201cAdd to Board\u201d; Safe\u2011Mode/SFW only; and editor tools in the owner dashboard. NonTechBlueprint1.29.1 Scope (from non\u2011technical plan \u2192 technical)Portfolio tab on public role profiles with SFW media, grids/galleries, and case\u2011study stories. Owner dashboard includes a Portfolio editor. NonTechBlueprintTag collaborators on portfolio items; collaborators must approve or decline the credit before their avatar/name appears; collaborator chips open profiles. NonTechBlueprintBoards (collections) across People, Studios, and Portfolio items; Add to Board from any eligible card; event telemetry board.add. NonTechBlueprintStudio linking: portfolio items can show the studio used and link to that studio page; role profiles can show \u201cHas/Owns Studio\u201d chips; telemetry studio.link.click. NonTechBlueprintSafe\u2011Mode: public surfaces remain SFW; anything beyond permitted tiers is hidden or \u201cblurred with label\u201d per policy when Safe\u2011Mode is ON. NonTechBlueprint1.29.2 Architecture (cost\u2011conscious, elastic)Frontend: Next.js (web) SSR for profile tabs; React Native (mobile) with identical data shape.API: AppSync GraphQL with Lambda resolvers.Storage: S3 (versioned) for images/video; CloudFront delivery; optional on\u2011upload transforms (thumbs, web\u2011optimized).Search/Discovery: Typesense collections for light faceting (\u201cgenres\u201d, \u201ccity\u201d, \u201crole\u201d), plus profile ranking signals.Moderation & policy: Safe\u2011Mode renderer + optional Rekognition moderation check; DMCA/T&S flows via Admin (\u00a71.28).Cost posture: No external DAM/SaaS. S3 lifecycle \u2192 IA/Glacier; CloudFront caching; transforms cached.1.29.3 Data model (Aurora PostgreSQL + S3)Tables (schema portfolio)portfolio_itemitem_id pk, owner_user_id, role_profile_id, title, slug, city, shoot_date, genres text[],",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.29.5",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 3995,
      "line": "1.29.5 Public UI (web) & owner/editor flowsProfile \u2192 Portfolio tab (public):Grid (masonry) of Portfolio Items; hover shows title, city, genres; Safe\u2011Mode ensures SFW only on public surfaces. NonTechBlueprintCase\u2011study page (optional route /p/{handle}/work/{slug}) with hero media, story, deliverables, \u201cRequest a similar shoot\u201d CTA, collaborators row (only approved chips click to profiles), and \u201cStudio used\u201d chip linking to the studio page. NonTechBlueprintOwner editor (dashboard):Sections: Portfolio (media upload, order, cover pick), Case Study (story/results/deliverables), Collaborators (invite \u2192 pending \u2192 approve/decline UI), Studio used (search/link). These tools are called out in the non\u2011technical owner editor scope. NonTechBlueprintBoards (public/private):From any People/Studio/Portfolio card: Add to Board \u2192 picker (create new or choose existing); fires board.add telemetry. NonTechBlueprintBoard page lists items (mixed types) with notes; can be private (default), unlisted (share link), or public (SEO\u2011light; SFW only).\u201cRequest a similar shoot\u201dOn case\u2011study pages and Board pages, a CTA opens a pre\u2011filled RFP (city, genres, budget band from case study). On submit, it creates an inquiry thread to the owner (or a marketplace RFP if configured).1.29.6 Safe\u2011Mode & policySFW enforcement on all public portfolio/board surfaces; beyond permitted tiers are not rendered (or shown as blurred blocks with \u201cHidden in Safe\u2011Mode\u201d label) and pages remain indexable only when SFW. NonTechBlueprintCollaborator consent: only approved tags render; pending/declined never show publicly. NonTechBlueprintDMCA/T&S: one\u2011click report from item menu routes to Admin casework (\u00a71.28) for takedown review; item can be blocked system\u2011wide during review.Watermarks (optional): on public previews only; originals retained in S3 and not publicly accessible.1.29.7 Media pipelineUpload via presigned S3; client sends x-amz-meta-sfw-band.Lambda transform: generate web\u2011optimized images (e.g., 1920/1280/640 px) + poster for video; strip EXIF; enforce max duration/size.Moderation check (optional): Rekognition Moderation; if score > threshold, set status='pending' and send to T&S queue.Caching: CloudFront with aggressive caching; image URLs include content hash to bust on update.1.29.8 Discovery & SEOJSON\u2011LD: CreativeWork (case study pages) or ImageGallery (portfolio grids) for SFW\u2011only items; profile/studio JSON\u2011LD stays as Person/Place (\u00a71.27/\u00a71.24).Internal linking: collaborator chips \u2192 profiles; studio chip \u2192 studio page; related items carousel on case\u2011study pages.Sitemaps: include only SFW case\u2011study routes; omit private/unlisted boards.Telemetry: board.add, portfolio.tag.approve, portfolio.tag.decline, studio.link.click, profile.view, cta.click.book/message. NonTechBlueprint1.29.9 Analytics & KPIsPortfolio coverage (% of active profiles with \u22653 items), collab approval rate, case\u2011study view \u2192 message/book CTR, boards created per visitor, RFPs initiated from case studies, studio\u2011from\u2011portfolio clicks.Event names follow the non\u2011technical telemetry list (see above). NonTechBlueprint1.29.10 Cost & scaleS3 + CloudFront only (no DAM SaaS). Lifecycle: originals to IA after 30 days; web renditions after 90 days.Rekognition moderation optional toggle by environment.Typesense fields: title, city, genres, role, recency; small documents (no full captions indexing at launch).1.29.11 Artifacts (copy\u2011pasteable into your Word plan)db/migrations/029_portfolio.sql \u2014 tables above.api/schema/portfolio.graphql \u2014 schema above.web/seo/jsonld-creativework.tsx \u2014 JSON\u2011LD helper.web/components/PortfolioItemCard.tsx \u2014 SFW card UI (title, city, genres, Safe\u2011Mode label).web/components/AddToBoardDialog.tsx \u2014 create/select + add.web/app/(public)/p/[handle]/work/[slug]/page.tsx \u2014 case\u2011study route.lambdas/portfolio-transform/index.ts \u2014 image/video transforms + EXIF strip.(All artifacts are text here for your single project doc.)1.29.12 Test planOwner editor: upload, reorder, set cover, write case\u2011study, publish \u2192 renders on profile.Collaborator tags: request \u2192 collaborator approves/declines \u2192 public chips render only on approve; decline hides. NonTechBlueprintSafe\u2011Mode: with Safe\u2011Mode ON, any beyond\u2011allowed tier media is hidden/blurred; public page remains SFW. NonTechBlueprintBoards: add/remove/reorder across mixed entities; private vs unlisted vs public behaviors; telemetry board.add fires. NonTechBlueprintStudio chip: link on case study opens the studio page; telemetry studio.link.click fires. NonTechBlueprintRequest similar shoot: CTA pre\u2011fills RFP and creates thread/RFP; edge cases (missing city/budget).DMCA: report \u2192 Admin case created \u2192 item blocked \u2192 unblock on resolution.SEO: JSON\u2011LD validates; only SFW case\u2011study URLs appear in sitemaps.Perf: LCP/INP within budgets on portfolio and case\u2011study templates (ties to \u00a71.27 CWV budgets).1.29.13 Work packages (Cursor 4\u2011agent lanes)Agent A \u2014 Data & API: migrations, GraphQL, presigned upload, moderation hooks, DMCA endpoint.Agent B \u2014 Web/RN UI: Portfolio grid, case\u2011study page, collaborator dialog, Safe\u2011Mode rendering, Add\u2011to\u2011Board dialog.Agent C \u2014 Media pipeline & SEO: Lambda transforms, EXIF strip, JSON\u2011LD helpers, sitemap emitters.Agent D \u2014 Discovery & RFP: studio chip linking, \u201cRequest similar shoot\u201d pre\u2011fill flow, Typesense indexing, telemetry.1.29.14 Acceptance criteria \u2014 mark \u00a71.29 FINAL only when ALL truePortfolio tab is live with SFW grids; owner can create/edit/publish items and case studies. NonTechBlueprintCollaborator tagging works with approval/decline; only approved credits render; collaborator chips open profiles. NonTechBlueprintBoards can collect People/Studios/Portfolio items; Add to Board is available and tracked. NonTechBlueprintCase\u2011study pages support Request similar shoot pre\u2011fill; studio chip links to the studio page. NonTechBlueprintSafe\u2011Mode strictly enforces SFW on public surfaces; anything beyond allowed tiers is hidden/blurred; pages remain indexable only when SFW. NonTechBlueprintDMCA/report routes to Admin casework; items can be blocked/unblocked via T&S.Telemetry events exist per plan (board.add, portfolio.tag.approve/decline, studio.link.click, etc.). NonTechBlueprintPerformance/SEO budgets pass; cost posture (S3/CloudFront/lifecycle) configured.\u00a71.3 \u2014 Booking, Payments & Disputes \u2014 Full Technical SpecPurpose. Implement fast, trustworthy booking with Instant Book (IB) and Request\u2011to\u2011Book (RTB), private Smart Invite to multiple profiles, escrowed payments, transparent cancellation, and a fair, auditable dispute process. This section translates your non\u2011technical scope (Service Profile, Packages, Extras, Usage License, IB/Smart Invite, checkout contracts, escrow, payout timing, and disputes) into build\u2011ready detail. NonTechBlueprint1.3.1 Scope confirmation (from non\u2011technical \u2192 technical)Key concepts & objects: Service Profile (SP), Packages, Extras, Usage License, Instant Book, Smart Invite, Auto\u2011accept rules. NonTechBlueprintBooking modes: Instant Book; Request\u2011to\u2011Book (+ Accept / Decline / Counter); Smart Invite (multi\u2011recipient private brief; buyer can award one or more hires). NonTechBlueprintCheckout & payment flow: select package/extras/license; pick date/time & location; dynamic travel fees; contract pack auto\u2011attached (Booking Agreement, Usage License, Model Release for model hires, Content Promotion Terms for creators); e\u2011sign at checkout; escrow notice; pay & confirm; calendars block; chat opens. NonTechBlueprintEscrow & payout: charge buyer \u2192 hold funds (\u201cescrow\u201d) \u2192 completion signals (time\u2011based vs deliverable\u2011based) \u2192 grace/review window \u2192 auto\u2011release if no dispute; new\u2011provider risk delays first payouts; ACH & card support; tipping after completion. NonTechBlueprint1.3.2 Architecture & cost postureFrontend: Next.js web (SSR for booking; ISR for directory), React Native apps.API: AppSync GraphQL \u2192 Lambda resolvers \u2192 Aurora Postgres (core booking) + DynamoDB (idempotent event log) + S3 (contracts/attachments).Payments: Stripe Connect (Standard/Express) + PaymentIntents for cards and Financial Connections (ACH). Funds are captured immediately to platform balance and transferred to providers on completion (acts as \u201cescrow\u201d without relying on card auth holds that expire). No extra PSP at launch to control cost and complexity.Compliance: Stripe KYC/KYB for providers, 3DS when required, PCI burden offloaded to Stripe.Cost: Pure serverless, small Aurora Serverless v2 floor, aggressive CloudFront caching, no paid DAM or workflow SaaS.1.3.3 Data model (Aurora, schema booking)Recommended path: db/migrations/013_booking_core.sqlbegin;",
      "title": "Public UI (web) & owner/editor flowsProfile \u2192 Portfolio tab (public):Grid (masonry) of Portfolio Items; hover shows title, city, genres; Safe\u2011Mode ensures SFW only on public surfaces. NonTechBlueprintCase\u2011study page (optional route /p/{handle}/work/{slug}) with hero media, story, deliverables, \u201cRequest a similar shoot\u201d CTA, collaborators row (only approved chips click to profiles), and \u201cStudio used\u201d chip linking to the studio page. NonTechBlueprintOwner editor (dashboard):Sections: Portfolio (media upload, order, cover pick), Case Study (story/results/deliverables), Collaborators (invite \u2192 pending \u2192 approve/decline UI), Studio used (search/link). These tools are called out in the non\u2011technical owner editor scope. NonTechBlueprintBoards (public/private):From any People/Studio/Portfolio card: Add to Board \u2192 picker (create new or choose existing); fires board.add telemetry. NonTechBlueprintBoard page lists items (mixed types) with notes; can be private (default), unlisted (share link), or public (SEO\u2011light; SFW only).\u201cRequest a similar shoot\u201dOn case\u2011study pages and Board pages, a CTA opens a pre\u2011filled RFP (city, genres, budget band from case study). On submit, it creates an inquiry thread to the owner (or a marketplace RFP if configured).1.29.6 Safe\u2011Mode & policySFW enforcement on all public portfolio/board surfaces; beyond permitted tiers are not rendered (or shown as blurred blocks with \u201cHidden in Safe\u2011Mode\u201d label) and pages remain indexable only when SFW. NonTechBlueprintCollaborator consent: only approved tags render; pending/declined never show publicly. NonTechBlueprintDMCA/T&S: one\u2011click report from item menu routes to Admin casework (\u00a71.28) for takedown review; item can be blocked system\u2011wide during review.Watermarks (optional): on public previews only; originals retained in S3 and not publicly accessible.1.29.7 Media pipelineUpload via presigned S3; client sends x-amz-meta-sfw-band.Lambda transform: generate web\u2011optimized images (e.g., 1920/1280/640 px) + poster for video; strip EXIF; enforce max duration/size.Moderation check (optional): Rekognition Moderation; if score > threshold, set status='pending' and send to T&S queue.Caching: CloudFront with aggressive caching; image URLs include content hash to bust on update.1.29.8 Discovery & SEOJSON\u2011LD: CreativeWork (case study pages) or ImageGallery (portfolio grids) for SFW\u2011only items; profile/studio JSON\u2011LD stays as Person/Place (\u00a71.27/\u00a71.24).Internal linking: collaborator chips \u2192 profiles; studio chip \u2192 studio page; related items carousel on case\u2011study pages.Sitemaps: include only SFW case\u2011study routes; omit private/unlisted boards.Telemetry: board.add, portfolio.tag.approve, portfolio.tag.decline, studio.link.click, profile.view, cta.click.book/message. NonTechBlueprint1.29.9 Analytics & KPIsPortfolio coverage (% of active profiles with \u22653 items), collab approval rate, case\u2011study view \u2192 message/book CTR, boards created per visitor, RFPs initiated from case studies, studio\u2011from\u2011portfolio clicks.Event names follow the non\u2011technical telemetry list (see above). NonTechBlueprint1.29.10 Cost & scaleS3 + CloudFront only (no DAM SaaS). Lifecycle: originals to IA after 30 days; web renditions after 90 days.Rekognition moderation optional toggle by environment.Typesense fields: title, city, genres, role, recency; small documents (no full captions indexing at launch).1.29.11 Artifacts (copy\u2011pasteable into your Word plan)db/migrations/029_portfolio.sql \u2014 tables above.api/schema/portfolio.graphql \u2014 schema above.web/seo/jsonld-creativework.tsx \u2014 JSON\u2011LD helper.web/components/PortfolioItemCard.tsx \u2014 SFW card UI (title, city, genres, Safe\u2011Mode label).web/components/AddToBoardDialog.tsx \u2014 create/select + add.web/app/(public)/p/[handle]/work/[slug]/page.tsx \u2014 case\u2011study route.lambdas/portfolio-transform/index.ts \u2014 image/video transforms + EXIF strip.(All artifacts are text here for your single project doc.)1.29.12 Test planOwner editor: upload, reorder, set cover, write case\u2011study, publish \u2192 renders on profile.Collaborator tags: request \u2192 collaborator approves/declines \u2192 public chips render only on approve; decline hides. NonTechBlueprintSafe\u2011Mode: with Safe\u2011Mode ON, any beyond\u2011allowed tier media is hidden/blurred; public page remains SFW. NonTechBlueprintBoards: add/remove/reorder across mixed entities; private vs unlisted vs public behaviors; telemetry board.add fires. NonTechBlueprintStudio chip: link on case study opens the studio page; telemetry studio.link.click fires. NonTechBlueprintRequest similar shoot: CTA pre\u2011fills RFP and creates thread/RFP; edge cases (missing city/budget).DMCA: report \u2192 Admin case created \u2192 item blocked \u2192 unblock on resolution.SEO: JSON\u2011LD validates; only SFW case\u2011study URLs appear in sitemaps.Perf: LCP/INP within budgets on portfolio and case\u2011study templates (ties to \u00a71.27 CWV budgets).1.29.13 Work packages (Cursor 4\u2011agent lanes)Agent A \u2014 Data & API: migrations, GraphQL, presigned upload, moderation hooks, DMCA endpoint.Agent B \u2014 Web/RN UI: Portfolio grid, case\u2011study page, collaborator dialog, Safe\u2011Mode rendering, Add\u2011to\u2011Board dialog.Agent C \u2014 Media pipeline & SEO: Lambda transforms, EXIF strip, JSON\u2011LD helpers, sitemap emitters.Agent D \u2014 Discovery & RFP: studio chip linking, \u201cRequest similar shoot\u201d pre\u2011fill flow, Typesense indexing, telemetry.1.29.14 Acceptance criteria \u2014 mark \u00a71.29 FINAL only when ALL truePortfolio tab is live with SFW grids; owner can create/edit/publish items and case studies. NonTechBlueprintCollaborator tagging works with approval/decline; only approved credits render; collaborator chips open profiles. NonTechBlueprintBoards can collect People/Studios/Portfolio items; Add to Board is available and tracked. NonTechBlueprintCase\u2011study pages support Request similar shoot pre\u2011fill; studio chip links to the studio page. NonTechBlueprintSafe\u2011Mode strictly enforces SFW on public surfaces; anything beyond allowed tiers is hidden/blurred; pages remain indexable only when SFW. NonTechBlueprintDMCA/report routes to Admin casework; items can be blocked/unblocked via T&S.Telemetry events exist per plan (board.add, portfolio.tag.approve/decline, studio.link.click, etc.). NonTechBlueprintPerformance/SEO budgets pass; cost posture (S3/CloudFront/lifecycle) configured.\u00a71.3 \u2014 Booking, Payments & Disputes \u2014 Full Technical SpecPurpose. Implement fast, trustworthy booking with Instant Book (IB) and Request\u2011to\u2011Book (RTB), private Smart Invite to multiple profiles, escrowed payments, transparent cancellation, and a fair, auditable dispute process. This section translates your non\u2011technical scope (Service Profile, Packages, Extras, Usage License, IB/Smart Invite, checkout contracts, escrow, payout timing, and disputes) into build\u2011ready detail. NonTechBlueprint1.3.1 Scope confirmation (from non\u2011technical \u2192 technical)Key concepts & objects: Service Profile (SP), Packages, Extras, Usage License, Instant Book, Smart Invite, Auto\u2011accept rules. NonTechBlueprintBooking modes: Instant Book; Request\u2011to\u2011Book (+ Accept / Decline / Counter); Smart Invite (multi\u2011recipient private brief; buyer can award one or more hires). NonTechBlueprintCheckout & payment flow: select package/extras/license; pick date/time & location; dynamic travel fees; contract pack auto\u2011attached (Booking Agreement, Usage License, Model Release for model hires, Content Promotion Terms for creators); e\u2011sign at checkout; escrow notice; pay & confirm; calendars block; chat opens. NonTechBlueprintEscrow & payout: charge buyer \u2192 hold funds (\u201cescrow\u201d) \u2192 completion signals (time\u2011based vs deliverable\u2011based) \u2192 grace/review window \u2192 auto\u2011release if no dispute; new\u2011provider risk delays first payouts; ACH & card support; tipping after completion. NonTechBlueprint1.3.2 Architecture & cost postureFrontend: Next.js web (SSR for booking; ISR for directory), React Native apps.API: AppSync GraphQL \u2192 Lambda resolvers \u2192 Aurora Postgres (core booking) + DynamoDB (idempotent event log) + S3 (contracts/attachments).Payments: Stripe Connect (Standard/Express) + PaymentIntents for cards and Financial Connections (ACH). Funds are captured immediately to platform balance and transferred to providers on completion (acts as \u201cescrow\u201d without relying on card auth holds that expire). No extra PSP at launch to control cost and complexity.Compliance: Stripe KYC/KYB for providers, 3DS when required, PCI burden offloaded to Stripe.Cost: Pure serverless, small Aurora Serverless v2 floor, aggressive CloudFront caching, no paid DAM or workflow SaaS.1.3.3 Data model (Aurora, schema booking)Recommended path: db/migrations/013_booking_core.sqlbegin;",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.3.5",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 4152,
      "line": "1.3.5 Booking modes & flowsA) Instant Book (IB) (opt\u2011in per provider)IB badge in search when allow_ib rule is active; buyer selects date/time, package, extras, license, location; payment \u2192 confirmed immediately if within rules; calendars block; chat opens. NonTechBlueprintServer logic: evaluate autoaccept_rule (weekday mask, min price, distance) before confirming; else fallback to RTB. NonTechBlueprintB) Request\u2011to\u2011Book (RTB)Buyer configures the same elements and sends a request. Provider can Accept / Decline / Counter (custom offer). On Accept, we charge (if not already) and mark confirmed. Unanswered requests auto\u2011expire (e.g., 24\u201348h). NonTechBlueprintC) Smart Invite (private, multi\u2011recipient)Buyer selects up to N profiles, writes one brief, and sends private invites. Buyer can award one or multiple hires. No public job board. NonTechBlueprint1.3.6 Checkout, contracts & e\u2011signContract pack auto\u2011attached at checkout:Booking Agreement (scope, deliverables, schedule, payment terms, cancellation, safety rules)Usage License (commercial/ads/exclusive/buyout tiers with price adders)Model Release (if booking a model)Content Promotion Terms (for creators\u2019 posting timelines/crediting)",
      "title": "Booking modes & flowsA) Instant Book (IB) (opt\u2011in per provider)IB badge in search when allow_ib rule is active; buyer selects date/time, package, extras, license, location; payment \u2192 confirmed immediately if within rules; calendars block; chat opens. NonTechBlueprintServer logic: evaluate autoaccept_rule (weekday mask, min price, distance) before confirming; else fallback to RTB. NonTechBlueprintB) Request\u2011to\u2011Book (RTB)Buyer configures the same elements and sends a request. Provider can Accept / Decline / Counter (custom offer). On Accept, we charge (if not already) and mark confirmed. Unanswered requests auto\u2011expire (e.g., 24\u201348h). NonTechBlueprintC) Smart Invite (private, multi\u2011recipient)Buyer selects up to N profiles, writes one brief, and sends private invites. Buyer can award one or multiple hires. No public job board. NonTechBlueprint1.3.6 Checkout, contracts & e\u2011signContract pack auto\u2011attached at checkout:Booking Agreement (scope, deliverables, schedule, payment terms, cancellation, safety rules)Usage License (commercial/ads/exclusive/buyout tiers with price adders)Model Release (if booking a model)Content Promotion Terms (for creators\u2019 posting timelines/crediting)",
      "origin": "numeric_heading"
    },
    {
      "id": "WBS-1.3.5",
      "root": "WBS-1",
      "source": "TD",
      "line_no": 4312,
      "line": "1.3.5 Booking modes & flowsA) Instant Book (IB) (opt\u2011in per provider)IB badge in search when allow_ib rule is active; buyer selects date/time, package, extras, license, location; payment \u2192 confirmed immediately if within rules; calendars block; chat opens. NonTechBlueprintServer logic: evaluate autoaccept_rule (weekday mask, min price, distance) before confirming; else fallback to RTB. NonTechBlueprintB) Request\u2011to\u2011Book (RTB)Buyer configures the same elements and sends a request. Provider can Accept / Decline / Counter (custom offer). On Accept, we charge (if not already) and mark confirmed. Unanswered requests auto\u2011expire (e.g., 24\u201348h). NonTechBlueprintC) Smart Invite (private, multi\u2011recipient)Buyer selects up to N profiles, writes one brief, and sends private invites. Buyer can award one or multiple hires. No public job board. NonTechBlueprint1.3.6 Checkout, contracts & e\u2011signContract pack auto\u2011attached at checkout:Booking Agreement (scope, deliverables, schedule, payment terms, cancellation, safety rules)Usage License (commercial/ads/exclusive/buyout tiers with price adders)Model Release (if booking a model)Content Promotion Terms (for creators\u2019 posting timelines/crediting)",
      "title": "Booking modes & flowsA) Instant Book (IB) (opt\u2011in per provider)IB badge in search when allow_ib rule is active; buyer selects date/time, package, extras, license, location; payment \u2192 confirmed immediately if within rules; calendars block; chat opens. NonTechBlueprintServer logic: evaluate autoaccept_rule (weekday mask, min price, distance) before confirming; else fallback to RTB. NonTechBlueprintB) Request\u2011to\u2011Book (RTB)Buyer configures the same elements and sends a request. Provider can Accept / Decline / Counter (custom offer). On Accept, we charge (if not already) and mark confirmed. Unanswered requests auto\u2011expire (e.g., 24\u201348h). NonTechBlueprintC) Smart Invite (private, multi\u2011recipient)Buyer selects up to N profiles, writes one brief, and sends private invites. Buyer can award one or multiple hires. No public job board. NonTechBlueprint1.3.6 Checkout, contracts & e\u2011signContract pack auto\u2011attached at checkout:Booking Agreement (scope, deliverables, schedule, payment terms, cancellation, safety rules)Usage License (commercial/ads/exclusive/buyout tiers with price adders)Model Release (if booking a model)Content Promotion Terms (for creators\u2019 posting timelines/crediting)",
      "origin": "numeric_heading"
    }
  ]
}