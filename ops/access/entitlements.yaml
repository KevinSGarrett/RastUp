version: 0
updated_at: "AUTO"
description: >
  Minimal entitlements for Orchestrator + Agents + CI. Replace bold placeholders before enabling “critical access gate”.

principals:
  orchestrator:
    kind: service
    note: Slack Bolt app (Socket Mode)
  agent-1: { kind: cursor-agent }
  agent-2: { kind: cursor-agent }
  agent-3: { kind: cursor-agent }
  agent-4: { kind: cursor-agent }
  ci:
    kind: github-actions
    repo: "**[REPO_URL]**"

resources:
  local-fs:
    target: "**[LOCAL_ROOT_PATH]**"
    required: [read, write, exec]
    granted:
      orchestrator: [read, write]
      agent-1: [read, write, exec]
      agent-2: [read, write, exec]
      agent-3: [read, write, exec]
      agent-4: [read, write]
      ci:       [read]

  github:
    repo: "**[REPO_URL]**"
    required: [read, write, pr, checks]
    granted:
      orchestrator: [read, pr]
      agent-1: [read, write, pr]
      agent-2: [read, write, pr]
      agent-3: [read, write, pr]
      agent-4: [read, pr]
      ci:      [read, checks]

  ci-oidc:
    provider: "**[CI_PROVIDER]**"
    account:  "**[AWS_ACCOUNT/ORG]**"
    required: [assume-role]
    granted:
      ci: [assume-role]

  registry:
    kind: ecr
    repo: "**[REGISTRY]**/**[APP]**-dev"
    required: [push, pull]
    granted:
      agent-1: [push, pull]
      agent-2: [push, pull]
      ci:      [push, pull]

  secrets:
    kind: aws-secrets-manager
    base_path: "**[APP]/**"
    required: [read, write, list]
    granted:
      agent-1: [write, list]
      agent-2: [read, list]
      agent-3: [read, list]
      agent-4: [read, list]
      ci:      [read, list]

  dns:
    provider: "**[DNS_PROVIDER]**"
    required: [read]
    granted:
      agent-1: [read]
      ci:      [read]
