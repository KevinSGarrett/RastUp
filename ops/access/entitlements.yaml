# ops/access/entitlements.yaml
principals:
  agent-1:
    description: DevOps/bootstrap agent
    capabilities:
      - local_fs: rw
      - github: pr,branch,write
      - ci: run
      - registry: read
  agent-2:
    description: Backend/services agent
    capabilities:
      - local_fs: rw
      - registry: push
  agent-3:
    description: Frontend/DX agent
    capabilities:
      - local_fs: rw
      - preview_env: deploy
  agent-4:
    description: QA/Security/Release agent
    capabilities:
      - local_fs: r
      - ci: run
      - security_scan: run
  ci:
    description: GitHub Actions automation
    capabilities:
      - github: pr,checks
      - registry: push
      - secrets: read:dev
resources:
  local_fs: {}
  github:
    repo: "**[REPO_URL]**"
  registry:
    name: "**[REGISTRY]**"
  secrets:
    manager: "AWS Secrets Manager"
policies:
  - principal: ci
    resource: secrets
    permission: read:dev
  - principal: agent-2
    resource: registry
    permission: push
  - principal: agent-3
    resource: preview_env
    permission: deploy
